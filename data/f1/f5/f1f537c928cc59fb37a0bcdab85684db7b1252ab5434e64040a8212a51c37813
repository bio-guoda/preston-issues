[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1310792720","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1310792720","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1310792720,"node_id":"IC_kwDOCMmefs5OIRwQ","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T19:26:39Z","updated_at":"2022-11-10T19:26:39Z","body":"Also, note that many different forward indexes may lead to a specific graph version. But, only a single provenance graph of a specific graph version exists.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1310792720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1310861983","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1310861983","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1310861983,"node_id":"IC_kwDOCMmefs5OIiqf","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T20:33:47Z","updated_at":"2022-11-10T20:33:47Z","body":"And, for convenience, it might be handy for the command-line tool to remember the last versions that were referenced. \r\n\r\nFor instance, let's say I cloned previously published Preston archive using:\r\n\r\n```\r\npreston clone --anchor hash://sha256/123abc . . . \r\n```\r\n\r\nand wanted to append a new version to this, I'd have to say:\r\n\r\n```\r\npreston track \"https://example.org\" --anchor hash://sha256/abc123...  \r\n```\r\n\r\nbut, really, I'd want to say:\r\n\r\n```\r\npreston track https://example.org\r\n```\r\n\r\nwhere the preston tool knows, from its context (previously cloned version hash://sha256/abc123... ) that I'd probably want to append to a recently used version. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1310861983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1310869946","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1310869946","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1310869946,"node_id":"IC_kwDOCMmefs5OIkm6","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T20:42:42Z","updated_at":"2022-11-10T20:42:42Z","body":"Currently, when starting to track something on a un-initialized preston archive, Preston will automatically generate a forward pointing index starting at urn:uuid:0659a54f-b713-4f86-a917-5be166a14110 (aka as \"the\" biodiversity graph). And, currently, when cloning an archive from a specific version, this forward pointing index is *not* generated, but the provenance can be computed from the securely linked content. So, after cloning from a specific version, you'd have to explicitly set the version to append to when adding (tracked) content to the biodiversity graph.\r\n\r\n  ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1310869946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1310880110","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1310880110","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1310880110,"node_id":"IC_kwDOCMmefs5OInFu","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T20:53:36Z","updated_at":"2022-11-10T20:53:36Z","body":"Internally, Git keeps track of equivalent pointers by stashing them into the ```.git/refs``` folder, and using a ```.git/HEAD``` file to point to the currently selected pointer. \r\n\r\nFor instance, for a recent GloBI source code git repo, we have:\r\n\r\n```\r\n$ find .git/refs/\r\n.git/refs/\r\n.git/refs/remotes\r\n.git/refs/remotes/origin\r\n.git/refs/remotes/origin/main\r\n.git/refs/remotes/origin/HEAD\r\n.git/refs/heads\r\n.git/refs/heads/main\r\n.git/refs/tags\r\n.git/refs/tags/v0.22.0\r\n.git/refs/tags/v0.24.0\r\n...\r\n```\r\n\r\nwith \r\n\r\n```\r\n$ cat .git/HEAD \r\nref: refs/heads/main\r\n```\r\n\r\nwith \r\n\r\n```\r\n$ cat .git/refs/heads/main \r\nb44b98c9dcaf4de4c02bcd2d70af02c97a3df793\r\n```\r\n\r\n@mielliott what do you think about keeping provenance log ids around in some ```.preston``` folder using the git approach: create some HEAD file that points to a named something (e.g., branch, tag), where that named something contains the hash identifying the version? \r\n\r\nAlternatively, we can make re-use the forward pointing index, recreating them when needed on cloning from a specific version Preston version. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1310880110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311933381","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1311933381","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1311933381,"node_id":"IC_kwDOCMmefs5OMoPF","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T16:42:49Z","updated_at":"2022-11-11T16:42:49Z","body":"I like the HEAD idea. As long as preston keeps a list of - at the minimum - all known heads of \"forward indexes\", i.e. leaf nodes in the global provenance graph, so that stuff in data/ stays discoverable by telling preston to switch heads/branches\r\n\r\nWe may also need to keep forward indexes around, not just the heads. Suppose we want to regenerate a forward index using `preston origins` - if a provenance log \"used\" two different previous logs (i.e. a \"merge\" happened), how does preston decide which one is used to build the forward index?\r\n\r\nNote that, if we start using \"heads\" as entry points into the provenance graph, I think a forward index is only needed to preserve current behavior of commands like `preston ls` and `preston history`. This is a big ol' can of worms though. I vote for whatever requires the least amount of work without risking loss of content discoverability.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311933381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311964816","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1311964816","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1311964816,"node_id":"IC_kwDOCMmefs5OMv6Q","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T17:17:42Z","updated_at":"2022-11-11T17:18:27Z","body":"@mielliott thanks for sharing. I am pacing around the room trying to figure out how to implement some intuitive way to keep track of prov log versions.\r\n\r\nIn my mind, the forward indexes are designed to find some leaf node in the global (universal?) provenance graph. \r\n\r\nThe leaf nodes are then used to:\r\n\r\n (1) append a new provenance log to (e.g., ```preston track```) or, \r\n\r\n(2) discover the origins of the provenance log (e.g., ```preston origin```, ```preston ls```). These origins include related provenance logs and other content via their securely embedded references. \r\n\r\nIn other words, (1) moves forward and updates the HEAD (a read/write operation), and (2) looks backward given some HEAD (a read-only operation).  ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311964816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311974928","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1311974928","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1311974928,"node_id":"IC_kwDOCMmefs5OMyYQ","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T17:29:47Z","updated_at":"2022-11-11T17:29:59Z","body":"Historically, we had ```preston history``` and ```preston ls``` list provenance in chronological order, starting at the \"big bang\", also known as urn:uuid:0659a54f-b713-4f86-a917-5be166a14110 .\r\n\r\nHowever, it may make more sense (and more secure), to make ```preston history``` display in reverse chronological order, starting with the most recent provenance log, and ending with the \"big bang\", or some other dead end (e.g., some unresolved provenance log). \r\n\r\nso instead of having ```preston history``` do:\r\n\r\nfrom big bang, list all linked provenance logs \r\n\r\nyou'd have:\r\n\r\nP1. find HEADs - If not explicitly provided, resolve one (or more) most recent heads relevant in the current context (using forward indexes or other mechanism)\r\nP2. list provenance of HEAD, starting at HEAD\r\n\r\nand for appending a new provenance log via ```preston track``` or ```preston append```, you'd have:\r\n\r\nA1. find HEADs (same as P1) (read-only)\r\nA2. use HEAD reference(s) in new provenance log (write-append)\r\nA3. update HEAD after closing provenance log (write-append)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311974928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311983906","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1311983906","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1311983906,"node_id":"IC_kwDOCMmefs5OM0ki","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T17:40:57Z","updated_at":"2022-11-11T17:40:57Z","body":"> However, it may make more sense (and more secure), to make preston history display in reverse chronological order, starting with the most recent provenance log, and ending with the \"big bang\", or some other dead end (e.g., some unresolved provenance log).\r\n\r\nI'm all for this, and I think this is the future. And I think it's more intuitive for new folks. More often than not, users are more concerned with the most recent stuff rather than retracing the world from the big bang. Change is scary though... and induces a lot of pacing around the room","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311983906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311985202","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1311985202","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1311985202,"node_id":"IC_kwDOCMmefs5OM04y","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T17:42:37Z","updated_at":"2022-11-11T17:42:37Z","body":"And, for keeping track of HEAD - we'd have one or more implementations: the current forward index and a more simplistic HEAD file with a content id in it. Whenever a HEAD is updated on an uninitialized read-write preston archive, a new index is created (either a new version following big bang, or populating a HEAD). Whenever a HEAD is updated that does not connect to the pre-existing HEADs (e.g., trying to explicitly add to a provided provenance log id which is *not* the same as the locally known HEAD), an error is thrown: \"merge conflict: local head [hash://sha256/abc123...] is different than provided head [hash://sha256/def456...]\" . \r\n\r\n@mielliott I'd start with the most simplistic implementation (re-using existing forward-index), and we can add other methods to help keep or improve the discoverability of the universal knowledge graph. (need a better word for this now that name ```Teddy-verse``` has been rejected by both Ted N. and Jose F.).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311985202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311989696","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1311989696","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1311989696,"node_id":"IC_kwDOCMmefs5OM1_A","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T17:47:25Z","updated_at":"2022-11-11T17:47:25Z","body":"@mielliott curious to hear any additional thoughts you may have, including, \"hey, why not do this or that?\"","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311989696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311997118","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1311997118","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1311997118,"node_id":"IC_kwDOCMmefs5OM3y-","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T17:53:28Z","updated_at":"2022-11-11T17:53:28Z","body":"btw - an argument against HEAD is that the approach does not support a append-only approach. . . and needs to overwrite existing content instead of appending to that hexastore index as separate, and uniquely named files.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311997118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311997848","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1311997848","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1311997848,"node_id":"IC_kwDOCMmefs5OM3-Y","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T17:53:51Z","updated_at":"2022-11-11T17:53:51Z","body":"can't erase the Teddy-verse right?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1311997848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312011450","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312011450","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312011450,"node_id":"IC_kwDOCMmefs5OM7S6","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T18:06:43Z","updated_at":"2022-11-11T18:06:43Z","body":"> needs to overwrite existing content instead of appending to that hexastore index as separate, and uniquely named files.\r\n\r\nI have no beef with editing hexastore index files -- they aren't identified by their content, so they aren't really representing a point in the Teddy-verse. They answer a question in a specific context, and if that context (e.g. head) changes over time, I might argue that the answer should too.\r\n\r\nJust a minute, need to think more about what you've proposed for HEAD","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312011450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312022616","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312022616","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312022616,"node_id":"IC_kwDOCMmefs5OM-BY","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T18:13:28Z","updated_at":"2022-11-11T18:30:10Z","body":"> if that context (e.g. head) changes over time\r\n\r\nor space, e.g. different preston archives can store different content for the first index file,  hash://sha256/2a5de79372318317a382ea9a2cef069780b852b01210ef59e06b640a3539cb5a\r\n\r\nif *question-identified* (hexastore) content can vary in space, maybe it can vary in time too\r\n\r\nMaybe the argument here is that the hexaverse =/= the teddyverse. Although snapshots of the hexaverse could be stored in the teddyverse, we currently don't do that. So, the hexaverse and teddyverse share the same identifier space (all possible hashes and hash algorithms), but are otherwise different things","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312022616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312062155","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312062155","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312062155,"node_id":"IC_kwDOCMmefs5ONHrL","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T18:41:36Z","updated_at":"2022-11-11T18:41:36Z","body":"Yes, I agree that the hexaverse (or totle-verse? after Aristotle) is apples compared to the Teddy-verse as pears. \r\n\r\nPerhaps this idea of rewriting the totle-verse across space *and* time is intuitive. And, the totle-verse keeps valuable context to what questions where asked, or what topics were carved out of the Teddy-verse. For instance, for a publication, I'd say that you'd want to fix the totle-verse over space, and append over time. And perhaps for a local workspace, you'd want to nuke the totle-verse explicitly if your interests switch from topic A to topic B. \r\n\r\nPerhaps a totle-verse reset can be expressed as:\r\n\r\n```preston reset``` --> deletes totle-verse\r\n\r\nor \r\n\r\n```preston reset --archor hash://sha256/abc123...``` to create a totle-verse starting populated with ```hash://sha256/abc123...``` as the answer to the question: what is all knowledge? Or, where did knowledge began here? \r\n\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312062155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312090872","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312090872","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312090872,"node_id":"IC_kwDOCMmefs5ONOr4","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T19:18:11Z","updated_at":"2022-11-11T19:20:22Z","body":"> or totle-verse? after Aristotle\r\n\r\nShould we ask Aristotle what he thinks of this name? Do we dare?\r\n\r\n> preston reset --archor hash://sha256/abc123... to create a totle-verse starting populated with hash://sha256/abc123... as the answer to the question: what is all knowledge? Or, where did knowledge began here?\r\n\r\nDoes this look like setting the content of the first index entry, `hash://sha256/2a5de79372318317a382ea9a2cef069780b852b01210ef59e06b640a3539cb5a`? Then\r\n\r\n```\r\n$ preston reset hash://sha256/abc123...\r\n$ preston get hash://sha256/2a5de79372318317a382ea9a2cef069780b852b01210ef59e06b640a3539cb5a\r\nhash://sha256/abc123...\r\n```\r\n\r\nFor example, for this amazon archive:\r\n\r\n```\r\n$ preston history\r\n<urn:uuid:0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/pav/hasVersion> <hash://sha256/d8f72bd865686e99eac413b36d198fd15f305966d2864091320f1868279451ff> .\r\n<hash://sha256/d7b73e3472d5a1989598f2a46116a4fc11dfb9ceacdf0a2b2f7f69737883c951> <http://purl.org/pav/previousVersion> <hash://sha256/d8f72bd865686e99eac413b36d198fd15f305966d2864091320f1868279451ff> .\r\n<hash://sha256/1aa34112ade084ccc8707388fbc329dcb8fae5f895cb266e3ad943f7495740b3> <http://purl.org/pav/previousVersion> <hash://sha256/d7b73e3472d5a1989598f2a46116a4fc11dfb9ceacdf0a2b2f7f69737883c951> .\r\n<hash://sha256/d20deca846391aec439ca5dd04dc8e996229921d21e11ef2ca6666d8798b160d> <http://purl.org/pav/previousVersion> <hash://sha256/1aa34112ade084ccc8707388fbc329dcb8fae5f895cb266e3ad943f7495740b3> .\r\n<hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7> <http://purl.org/pav/previousVersion> <hash://sha256/d20deca846391aec439ca5dd04dc8e996229921d21e11ef2ca6666d8798b160d> .\r\n<hash://sha256/6d924b3cc007cdb2fd78eab535dd9102563ebdddf4e0e30b00b50bde555f5e68> <http://purl.org/pav/previousVersion> <hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7> .\r\n<hash://sha256/e9ede0e9f18b4b13694cf9efa373a1903a4af7e74004c0e95b42ed200a95db0a> <http://purl.org/pav/previousVersion> <hash://sha256/6d924b3cc007cdb2fd78eab535dd9102563ebdddf4e0e30b00b50bde555f5e68> .\r\n<hash://sha256/0a2035a61176d7bcafbf0e500152d25ba45a15ebbfdfb03c655657a94c798681> <http://purl.org/pav/previousVersion> <hash://sha256/e9ede0e9f18b4b13694cf9efa373a1903a4af7e74004c0e95b42ed200a95db0a> .\r\n\r\n$ preston reset hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7\r\n\r\n$ preston history\r\n<urn:uuid:0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/pav/hasVersion> <hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7> .\r\n<hash://sha256/6d924b3cc007cdb2fd78eab535dd9102563ebdddf4e0e30b00b50bde555f5e68> <http://purl.org/pav/previousVersion> <hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7> .\r\n<hash://sha256/e9ede0e9f18b4b13694cf9efa373a1903a4af7e74004c0e95b42ed200a95db0a> <http://purl.org/pav/previousVersion> <hash://sha256/6d924b3cc007cdb2fd78eab535dd9102563ebdddf4e0e30b00b50bde555f5e68> .\r\n<hash://sha256/0a2035a61176d7bcafbf0e500152d25ba45a15ebbfdfb03c655657a94c798681> <http://purl.org/pav/previousVersion> <hash://sha256/e9ede0e9f18b4b13694cf9efa373a1903a4af7e74004c0e95b42ed200a95db0a> .\r\n```\r\n\r\nOr does it also delete the entire old index, so\r\n\r\n```\r\n$ preston reset hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7\r\n\r\n$ preston history\r\n<urn:uuid:0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/pav/hasVersion> <hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7> .\r\n```\r\n\r\nThis second option seems more useful. But then there's a third option that is more git-like, where `preston reset` would rollback history instead of changing the big bang, i.e. delete everything in the index that comes *after* the specified hash. In this case we'd get\r\n\r\n```\r\n$ preston reset hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7\r\n\r\n$ preston history\r\n<urn:uuid:0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/pav/hasVersion> <hash://sha256/d8f72bd865686e99eac413b36d198fd15f305966d2864091320f1868279451ff> .\r\n<hash://sha256/d7b73e3472d5a1989598f2a46116a4fc11dfb9ceacdf0a2b2f7f69737883c951> <http://purl.org/pav/previousVersion> <hash://sha256/d8f72bd865686e99eac413b36d198fd15f305966d2864091320f1868279451ff> .\r\n<hash://sha256/1aa34112ade084ccc8707388fbc329dcb8fae5f895cb266e3ad943f7495740b3> <http://purl.org/pav/previousVersion> <hash://sha256/d7b73e3472d5a1989598f2a46116a4fc11dfb9ceacdf0a2b2f7f69737883c951> .\r\n<hash://sha256/d20deca846391aec439ca5dd04dc8e996229921d21e11ef2ca6666d8798b160d> <http://purl.org/pav/previousVersion> <hash://sha256/1aa34112ade084ccc8707388fbc329dcb8fae5f895cb266e3ad943f7495740b3> .\r\n<hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7> <http://purl.org/pav/previousVersion> <hash://sha256/d20deca846391aec439ca5dd04dc8e996229921d21e11ef2ca6666d8798b160d> .\r\n<hash://sha256/6d924b3cc007cdb2fd78eab535dd9102563ebdddf4e0e30b00b50bde555f5e68> <http://purl.org/pav/previousVersion> <hash://sha256/49c7a66a6b3c5507f9c1519791ef17b795a6e6e52a5e0cd6dd10866dcd1c51d7> .\r\n<hash://sha256/e9ede0e9f18b4b13694cf9efa373a1903a4af7e74004c0e95b42ed200a95db0a> <http://purl.org/pav/previousVersion> <hash://sha256/6d924b3cc007cdb2fd78eab535dd9102563ebdddf4e0e30b00b50bde555f5e68> .\r\n```\r\n\r\nI mention the third option because that's how `git reset x` operates, and keeping some symmetry between git behavior and preston behavior might make preston easier to use for newcomers. It's solving a whole different problem though, e.g. it gives users an undo button to fix mistakes. If I do `preston track https://google.co`, I might want to undo that and do `preston track https://google.com` instead. Deletion is scary, but at the same time, preston commands that append to the prov log can be even scarier because eventually I'm gonna make mistakes and build up garbage in the log.\r\n\r\nSorry for the tangent. I guess I'm proposing to reword the command for your use case to something like `preston restart` etc.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312090872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312108338","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312108338","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312108338,"node_id":"IC_kwDOCMmefs5ONS8y","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T19:31:54Z","updated_at":"2022-11-11T19:35:54Z","body":"In any case, when the index is revised, I think it would be good to keep the old index around somehow for the sake of keeping stuff in data/ discoverable.\r\n\r\nAnd as for the attractiveness of append-only stores, I think it's also worth noting that as preston has grown up, it has enabled a lot of non-archival-related use cases, where clean-up of cached data might be desirable/necessary. Especially cleaning up stuff in data/ that is not discoverable, e.g. when doing `preston cat --remote` and storing stuff that isn't mentioned in any **\\*locally discoverable\\*** provenance logs. Not trying to go on a tangent about a `preston clean` command, I just think this is very relevant to the issue of \"anchor/provenance id management\" and its use cases","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312108338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312167525","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312167525","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312167525,"node_id":"IC_kwDOCMmefs5ONhZl","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T20:28:09Z","updated_at":"2022-11-11T20:49:29Z","body":"One more comment, then I gotta switch gears to other stuff.\r\n\r\n> In my mind, the forward indexes are designed to find some leaf node in the global (universal?) provenance graph.\r\n>\r\n> The leaf nodes are then used to:\r\n>\r\n> (1) append a new provenance log to (e.g., preston track) or,\r\n>\r\n> (2) discover the origins of the provenance log (e.g., preston origin, preston ls). These origins include related provenance logs and other content via their securely embedded references.\r\n>\r\n> In other words, (1) moves forward and updates the HEAD (a read/write operation), and (2) looks backward given some HEAD (a read-only operation).\r\n\r\nI fully agree with this. The one unique usecase for forward indexes is to discover new stuff, i.e. to ask another archive \"do you a newer node in the biodiversity graph?\" Other than that, keeping a head pointer and tracing the graph in reverse (`preston origins`) can do everything else that the forward indexes can/currently do. The one hairy issue I can think of is ambiguity in recreating a forward index, e.g. when `preston origins` runs into a fork, which version should be used to create the index? So, I propose a solution: include all of them. The forward index then becomes a tree. If `preston history` and `preston ls` are changed to operate in reverse, then the forward index no longer needs to represent a single path in the biodiversity graph.\r\n\r\nMaybe we have a `preston fetch --remote` (or whatever) command. Its job is to update the forward index (starting from HEAD? Maybe also update HEAD) by asking remote repositories for their index entries.\r\n\r\nRepository A's first index entry looks like\r\n```\r\nhash://sha256/aaa\r\n```\r\n\r\nand repository B's first index entry looks like \r\n```\r\nhash://sha256/bbb\r\n```\r\n\r\nthen running `preston fetch --remote https://repo-b.com` updates repo A's first index entry to\r\n```\r\nhash://sha256/aaa\r\nhash://sha256/bbb\r\n```\r\n\r\nthe HEAD file can point to any hash in the tree, and the hexastore can be used to find newer nodes in the tree, or update existing entries","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312167525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312167933","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312167933","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312167933,"node_id":"IC_kwDOCMmefs5ONhf9","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T20:28:43Z","updated_at":"2022-11-11T20:31:03Z","body":"@mielliott thanks for sharing your notes. \r\n\r\nI like your idea to try and reuse existing git slang/behavior by implementing the 3rd proposed ```preston reset hash://sha256/abc123...``` . \r\n\r\nI also like your \"preston clean\" idea. Much like doing a copy using ```preston cp some/path``` and then nuking the old location, leaving the unlinked/ unreferenced data behind (for better or worse).\r\n\r\nI also see parallels with ```preston verify``` in that ```preston clean``` would try and visit the provenance logs and their linked content. \r\n\r\nOne use case I am not clear on yet - \r\n\r\nWhat would you expect the local index to be after doing:\r\n\r\n\r\n```preston clone https://linker.bio --anchor hash://sha256/abc123...```\r\n\r\n? \r\n\r\nI am currently leaning towards:\r\n\r\n```\r\n<big bang> <hasVersion> <hash://sha256/abc123...> .\r\n```\r\n\r\nwhere you can still do:\r\n\r\n```preston origin hash://sha256/abc123...```\r\n\r\nto uncover the origins of the archive. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312167933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312175456","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312175456","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312175456,"node_id":"IC_kwDOCMmefs5ONjVg","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T20:40:32Z","updated_at":"2022-11-11T20:41:36Z","body":"> One use case I am not clear on yet -\r\n>\r\n> What would you expect the local index to be after doing:\r\n>\r\n> I am currently leaning towards:\r\n> ...\r\n\r\nI think that's great! Then, `preston clone https://linker.bio`, without a specified anchor, will clone the whole thing, index and all\r\n\r\n> where you can still do:\r\n> \r\n> `preston origin hash://sha256/abc123...`\r\n> \r\n> to uncover the origins of the archive.\r\n\r\nLove it!","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312175456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312176688","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312176688","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312176688,"node_id":"IC_kwDOCMmefs5ONjow","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T20:42:34Z","updated_at":"2022-11-11T20:42:34Z","body":"good stuff. I'll try and motivate myself to take a stab at implementing all this.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312176688/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312178034","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312178034","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312178034,"node_id":"IC_kwDOCMmefs5ONj9y","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T20:44:54Z","updated_at":"2022-11-11T20:44:54Z","body":"We commented right after each other, did you see https://github.com/bio-guoda/preston/issues/201#issuecomment-1312167525? I think changing the hexastore index this way paves the way for easy branch management, and a clearer idea of how the HEAD pointer can work","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312178034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312182958","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312182958","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312182958,"node_id":"IC_kwDOCMmefs5ONlKu","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T20:52:45Z","updated_at":"2022-11-11T20:53:32Z","body":"yes, I did see https://github.com/bio-guoda/preston/issues/201#issuecomment-1312167525 .\r\n\r\nAnd, I agree that recreating a forward index can be a bit dicey. I propose to *not* try and recreate a forward index when none is available. We can always change this behavior, because we wouldn't lose any provenance / linked content by omitting this index for now.\r\n\r\nAre you ok with that?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312182958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312188903","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312188903","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312188903,"node_id":"IC_kwDOCMmefs5ONmnn","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T21:02:16Z","updated_at":"2022-11-11T21:07:28Z","body":"> I propose to not try and recreate a forward index when none is available.\r\n\r\nAgreed. We don't need to recreate the forward index from provenance, but it's good to remember that all the information needed to do so is there. I suppose the exciting idea, for me, was more about updating and merging indexes without causing conflicts. It's fun to imagine running `preston clone --remote [url1]` and then `preston clone --remote [url2]` and getting all the data from both places without running into any index conflicts. Then HEAD indicates which branch to append to etc.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312188903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312192892","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312192892","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312192892,"node_id":"IC_kwDOCMmefs5ONnl8","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T21:08:08Z","updated_at":"2022-11-11T21:08:08Z","body":"Ok, sounds like we''ll leave the fixing of merge conflicts in the Totle-verse for time other time. I'll keep you posted on my progress. \r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312192892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312193411","html_url":"https://github.com/bio-guoda/preston/issues/201#issuecomment-1312193411","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/201","id":1312193411,"node_id":"IC_kwDOCMmefs5ONnuD","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T21:09:01Z","updated_at":"2022-11-11T21:09:01Z","body":"Sounds good","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1312193411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]