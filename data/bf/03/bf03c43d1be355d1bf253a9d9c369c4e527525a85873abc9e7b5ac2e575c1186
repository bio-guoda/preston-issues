[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/430811938","html_url":"https://github.com/bio-guoda/preston/issues/3#issuecomment-430811938","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/3","id":430811938,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDgxMTkzOA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-17T22:29:50Z","updated_at":"2018-10-17T22:29:50Z","body":"Some initial findings on crawling DataONE.\r\n\r\nMethods used:\r\n\r\n1. First grab a page of results using:\r\n\r\nhttp://cn.dataone.org/cn/v2/query/solr/?q=formatId:eml*+AND+-obsoletedBy:*&fl=identifier,dataUrl&wt=json&start=0&rows=100\r\n\r\n2. For each results (\"docs\"), resolve the object location lists (e.g., https://cn.dataone.org/cn/v2/resolve/aekos.org.au%2Fcollection%2Fnsw.gov.au%2Fnsw_atlas%2Fvis_flora_module%2FKM_CUDM.20160202 ). To bring the federated DataONE network to the surface, grab non-directed xml content using for instance ```curl \"https://cn.dataone.org/cn/v2/resolve/aekos.org.au%2Fcollection%2Fnsw.gov.au%2Fnsw_atlas%2Fvis_flora_module%2FKM_CUDM.20160202\" | head ``` to generate something like:\r\n\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\r\n<ns2:objectLocationList xmlns:ns2=\"http://ns.dataone.org/service/types/v1\">\r\n    <identifier>aekos.org.au/collection/nsw.gov.au/nsw_atlas/vis_flora_module/KM_CUDM.20160202</identifier>\r\n    <objectLocation>\r\n        <nodeIdentifier>urn:node:TERN</nodeIdentifier>\r\n        <baseURL>https://dataone.tern.org.au/mn</baseURL>\r\n        <version>v1</version>\r\n        <version>v2</version>\r\n        <url>https://dataone.tern.org.au/mn/v2/object/aekos.org.au%2Fcollection%2Fnsw.gov.au%2Fnsw_atlas%2Fvis_flora_module%2FKM_CUDM.20160202</url>\r\n    </objectLocation>\r\n...\r\n```\r\n3. finally, retrieve all emls using the provided url objectLocations .\r\n\r\nAnecdotal evidence suggests that files are retrieve as a rate of 1 file per 5 seconds. Given that over 100k emls are said to exist in the DataONE network, it'll take at least 5 * 100k seconds ~ (500k / 3600) hours ~ 138 hours ~ 5 days to access all the files. Assuming that there's one xml file for each EML and that EML are stored redundantly across the federated network, the actual completion time is probably 5-10x more than that. Planning to measure this using a archive.guoda.bio job.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/430811938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/430815737","html_url":"https://github.com/bio-guoda/preston/issues/3#issuecomment-430815737","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/3","id":430815737,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDgxNTczNw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-17T22:47:15Z","updated_at":"2018-10-17T22:47:15Z","body":"I've created http://archive.guoda.bio/job/preston-dataone/ and started a first run. \r\n\r\nFrom console log:\r\n\r\n```console\r\nStarted by user Jorrit Poelen\r\nBuilding on master in workspace /var/lib/jenkins/workspace/preston-dataone\r\n[preston-dataone] $ /bin/bash /tmp/hudson286849390515440736.sh\r\n<https://preston.guoda.org> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#SoftwareAgent> .\r\n<https://preston.guoda.org> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Agent> .\r\n<https://preston.guoda.org> <http://purl.org/dc/terms/description> \"Preston is a software program that finds, archives and provides access to biodiversity datasets.\"@en .\r\n<b6a73da4-25f4-4829-bc0f-886f65b7e496> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Activity> .\r\n<b6a73da4-25f4-4829-bc0f-886f65b7e496> <http://purl.org/dc/terms/description> \"A crawl event that discovers biodiversity archives.\"@en .\r\n<b6a73da4-25f4-4829-bc0f-886f65b7e496> <http://www.w3.org/ns/prov#startedAtTime> \"2018-10-17T22:42:41.609Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\r\n<b6a73da4-25f4-4829-bc0f-886f65b7e496> <http://www.w3.org/ns/prov#wasStartedBy> <https://preston.guoda.org> .\r\n<0659a54f-b713-4f86-a917-5be166a14110> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Entity> .\r\n<0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/dc/terms/description> \"A biodiversity dataset graph archive.\"@en .\r\n<https://dataone.org> <http://www.w3.org/ns/prov#wasAssociatedWith> <b6a73da4-25f4-4829-bc0f-886f65b7e496> .\r\n<https://dataone.org> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Organization> .\r\n<http://cn.dataone.org/cn/v2/query/solr/?q=formatId:eml*+AND+-obsoletedBy:*&fl=identifier,dataUrl&wt=json&start=0&rows=100> <http://purl.org/dc/terms/description> \"Data Observation Network for Earth (DataONE) is the foundation of new innovative environmental science through a distributed framework and sustainable cyberinfrastructure that meets the needs of science and society for open, persistent, robust, and secure access to well-described and easily discovered Earth observational data. DataONE provides a registry EML descriptors.\"@en .\r\n<http://cn.dataone.org/cn/v2/query/solr/?q=formatId:eml*+AND+-obsoletedBy:*&fl=identifier,dataUrl&wt=json&start=0&rows=100> <http://purl.org/pav/createdBy> <https://dataone.org> .\r\n...\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/430815737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/431446367","html_url":"https://github.com/bio-guoda/preston/issues/3#issuecomment-431446367","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/3","id":431446367,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQ0NjM2Nw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-19T17:55:52Z","updated_at":"2018-10-19T17:55:52Z","body":"First pass has been implemented.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/431446367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]