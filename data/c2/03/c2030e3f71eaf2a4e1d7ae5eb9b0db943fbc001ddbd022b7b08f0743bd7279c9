{"url":"https://api.github.com/repos/bio-guoda/preston/issues/173","repository_url":"https://api.github.com/repos/bio-guoda/preston","labels_url":"https://api.github.com/repos/bio-guoda/preston/issues/173/labels{/name}","comments_url":"https://api.github.com/repos/bio-guoda/preston/issues/173/comments","events_url":"https://api.github.com/repos/bio-guoda/preston/issues/173/events","html_url":"https://github.com/bio-guoda/preston/issues/173","id":1249774179,"node_id":"I_kwDOCMmefs5Kfgpj","number":173,"title":"suspicious DwC-A resources published via NEON Biorepositories missing materialSample.csv","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-05-26T16:17:39Z","updated_at":"2022-12-23T17:43:23Z","closed_at":"2022-12-23T17:41:19Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"related to https://github.com/globalbioticinteractions/neon-biorepo/issues/3\r\n\r\nwhen tracking NEON RSS biorepository, I found some suspicious DwC-A resources with missing materialSample.csv tables:\r\n\r\nfor instance, \r\n\r\n```\r\n$ preston track https://biorepo.neonscience.org/portal/content/dwca/NEON-SWMC-SF_DwC-A.zip\\\r\n preston dwc-stream\r\n```\r\n\r\nproduced the following warning :\r\n\r\n```\r\n[main] WARN bio.guoda.preston.cmd.DwcRecordExtractor - suspicious DwC resource [hash://sha256/66b1e01105470a803dc6682a9aa5ce31ead4ef8ae51ae318247bbd647f0ce725] caused errors in processing\r\nbio.guoda.preston.stream.ContentStreamException: failed to handle dwc records from [zip:hash://sha256/66b1e01105470a803dc6682a9aa5ce31ead4ef8ae51ae318247bbd647f0ce725!/materialSample.csv]\r\n\tat org.gbif.dwc.DwCArchiveStreamHandler.handleAssumedDwCArchive(DwCArchiveStreamHandler.java:90)\r\n\tat org.gbif.dwc.DwCArchiveStreamHandler.handle(DwCArchiveStreamHandler.java:55)\r\n\tat bio.guoda.preston.stream.ContentStreamHandlerImpl.handle(ContentStreamHandlerImpl.java:35)\r\n\tat bio.guoda.preston.cmd.DwcRecordExtractor$MyContentStreamHandlerImpl.handle(DwcRecordExtractor.java:103)\r\n\tat bio.guoda.preston.stream.ArchiveStreamHandler.handleArchiveEntries(ArchiveStreamHandler.java:60)\r\n\tat bio.guoda.preston.stream.ArchiveStreamHandler.handle(ArchiveStreamHandler.java:29)\r\n\tat bio.guoda.preston.stream.ContentStreamHandlerImpl.handle(ContentStreamHandlerImpl.java:35)\r\n\tat bio.guoda.preston.cmd.DwcRecordExtractor$MyContentStreamHandlerImpl.handle(DwcRecordExtractor.java:103)\r\n\tat bio.guoda.preston.cmd.DwcRecordExtractor.on(DwcRecordExtractor.java:67)\r\n\tat bio.guoda.preston.cmd.CmdDwcRecordStream$1.emit(CmdDwcRecordStream.java:47)\r\n\tat bio.guoda.preston.process.EmittingStreamRDF.copyOnEmit(EmittingStreamRDF.java:57)\r\n\tat bio.guoda.preston.process.EmittingStreamRDF.parseAndEmit(EmittingStreamRDF.java:46)\r\n\tat bio.guoda.preston.cmd.CmdDwcRecordStream.run(CmdDwcRecordStream.java:52)\r\n\tat bio.guoda.preston.cmd.CmdDwcRecordStream.run(CmdDwcRecordStream.java:27)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:1939)\r\n\tat picocli.CommandLine.access$1300(CommandLine.java:145)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2352)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2314)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2316)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2078)\r\n\tat bio.guoda.preston.Preston.run(Preston.java:81)\r\n\tat bio.guoda.preston.Preston.main(Preston.java:70)\r\nCaused by: bio.guoda.preston.store.DereferenceException: failed to dereference [zip:hash://sha256/66b1e01105470a803dc6682a9aa5ce31ead4ef8ae51ae318247bbd647f0ce725!/materialSample.csv]\r\n\tat bio.guoda.preston.store.ContentHashDereferencer.get(ContentHashDereferencer.java:25)\r\n\tat bio.guoda.preston.store.ContentHashDereferencer.get(ContentHashDereferencer.java:10)\r\n\tat org.gbif.dwc.DwCArchiveStreamHandler.createReader(DwCArchiveStreamHandler.java:124)\r\n\tat org.gbif.dwc.DwCArchiveStreamHandler.handleAssumedDwCArchive(DwCArchiveStreamHandler.java:84)\r\n\t... 23 more\r\nCaused by: java.io.IOException: failed to find content identified by [<zip:hash://sha256/66b1e01105470a803dc6682a9aa5ce31ead4ef8ae51ae318247bbd647f0ce725!/materialSample.csv>]\r\n\tat bio.guoda.preston.stream.ContentStreamFactory.create(ContentStreamFactory.java:54)\r\n\tat bio.guoda.preston.store.ContentHashDereferencer.get(ContentHashDereferencer.java:23)\r\n\t... 26 more\r\n```\r\n\r\nsuggesting that:\r\n\r\n```\r\n$ preston alias \r\n<https://biorepo.neonscience.org/portal/content/dwca/NEON-SWMC-SF_DwC-A.zip> <http://purl.org/pav/hasVersion> <hash://sha256/66b1e01105470a803dc6682a9aa5ce31ead4ef8ae51ae318247bbd647f0ce725> <urn:uuid:a85ac188-8595-4bf0-84d1-b3ee22129a3d> .\r\n```\r\n\r\ncontains a DwC-A with meta.xml referencing materialSample.csv , but none was found in the published endpoint. \r\n\r\nSee attached data.zip to reproduce. \r\n\r\n[data.zip](https://github.com/bio-guoda/preston/files/8780446/data.zip)\r\n\r\nfyi @egbot @arbolitoloco @nfranz ","closed_by":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bio-guoda/preston/issues/173/timeline","performed_via_github_app":null,"state_reason":"completed"}