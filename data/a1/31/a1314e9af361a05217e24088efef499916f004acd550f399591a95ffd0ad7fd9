[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/797588863","html_url":"https://github.com/bio-guoda/preston/issues/111#issuecomment-797588863","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/111","id":797588863,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzU4ODg2Mw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T16:08:15Z","updated_at":"2021-03-12T16:08:15Z","body":"@matdillen thanks for sharing your detailed comparison between original and cached images related to records registered in the GBIF network. \r\n\r\nGiven that content served via URLs is known the change or disappear, I've just sampled the sha256 hash of the images as well as cloned images from their current locations using: \r\n\r\n```\r\n$ preston track https://api.gbif.org/v1/occurrence/2595657020 https://api.gbif.org/v1/occurrence/465102905 https://api.gbif.org/v1/image/unsafe/http%3A%2F%2Fmediaphoto.mnhn.fr%2Fmedia%2F1441319501228J9DUIyjSgi6vMFSN https://api.gbif.org/v1/image/unsafe/http%3A%2F%2Foxalis.br.fgov.be%2Fimages%2FV%2FBR0%2F000%2F025%2F856%2F880%2FBR0000025856880V.jpg | grep hasVersion\r\n<https://api.gbif.org/v1/occurrence/2595657020> <http://purl.org/pav/hasVersion> <hash://sha256/91b826d93a920b243399f05214b3a9cbb2b3b1e231b8e6ebe774f24508e6e41e> <urn:uuid:fcb1eed6-e840-4297-818b-98fe7ccdebe6> .\r\n<http://oxalis.br.fgov.be/images/V/BR0/000/025/856/880/BR0000025856880V.jpg> <http://purl.org/pav/hasVersion> <hash://sha256/3e4506c89b1f16e95604adbc9a49d47be75095e0e45aaf526de5f8a6fb33caad> <urn:uuid:e1d33c6f-7dea-4787-ba48-9e4a064f72c7> .\r\n<https://www.gbif.org/occurrence/465102905> <http://purl.org/pav/hasVersion> <hash://sha256/0916df73b87a58beca95e8c5db0aafdcbcb8fef61cf521cf7f09c76f706aed6d> <urn:uuid:4e4e1304-815a-48ec-a56f-26ed103fb487> .\r\n<https://api.gbif.org/v1/occurrence/465102905> <http://purl.org/pav/hasVersion> <hash://sha256/ec46d68ab36e752495764efd5451b19ac51d57992851bb89c858c57296c9a028> <urn:uuid:ab90d3ae-2d97-44c6-9773-e8c6caad21af> .\r\n<http://mediaphoto.mnhn.fr/media/1441319501228J9DUIyjSgi6vMFSN> <http://purl.org/pav/hasVersion> <hash://sha256/0e9f12531e5371ec0b3c2b28cb2f0ae47e8c8420941f3770a85e63756a75d84d> <urn:uuid:222547d1-5f7b-458a-ad95-21344f0c2bf1> .\r\n<https://api.gbif.org/v1/image/unsafe/http%3A%2F%2Fmediaphoto.mnhn.fr%2Fmedia%2F1441319501228J9DUIyjSgi6vMFSN> <http://purl.org/pav/hasVersion> <hash://sha256/5bf7b372806c606efb5541b735dac4023c417b77d853361d9e9df09be2743c3b> <urn:uuid:3cd977a6-1ba0-4c41-a3e6-1e6ce6f2f124> .\r\n<https://api.gbif.org/v1/image/unsafe/http%3A%2F%2Foxalis.br.fgov.be%2Fimages%2FV%2FBR0%2F000%2F025%2F856%2F880%2FBR0000025856880V.jpg> <http://purl.org/pav/hasVersion> <hash://sha256/73a7cd67564da391204ba2e0a17795913015a0d2e079c4d3cd5125ed0e37c610> <urn:uuid:45e0d2f6-7249-44bd-ae61-4231ba018fbb> .\r\n```\r\n\r\nI've attached the related content using convention [sha256].jpg . Like you described, the hash of the source and cached images are different, suggesting that some transformation of the original image occurred. \r\n\r\n source |  cached | \r\n --- | ---\r\nhash://sha256/3e45... ![3e4506c89b1f16e95604adbc9a49d47be75095e0e45aaf526de5f8a6fb33caad](https://user-images.githubusercontent.com/1084872/110965234-d9ae7c00-8308-11eb-8454-44498be27beb.jpg) | hash://sha256/73a7...  ![73a7cd67564da391204ba2e0a17795913015a0d2e079c4d3cd5125ed0e37c610](https://user-images.githubusercontent.com/1084872/110965140-c4d1e880-8308-11eb-9356-e085dd6112c8.jpg)\r\nhash://sha256/0e9f... ![0e9f12531e5371ec0b3c2b28cb2f0ae47e8c8420941f3770a85e63756a75d84d](https://user-images.githubusercontent.com/1084872/110965274-e206b700-8308-11eb-9349-44cddbb6218e.jpg) | hash://sha256/5bf7... ![5bf7b372806c606efb5541b735dac4023c417b77d853361d9e9df09be2743c3b](https://user-images.githubusercontent.com/1084872/110965183-cdc2ba00-8308-11eb-9c2b-4dc63f31e818.jpg)\r\n\r\nI am not quite sure how gbif processes these images, perhaps others might know.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/797588863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/821346001","html_url":"https://github.com/bio-guoda/preston/issues/111#issuecomment-821346001","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/111","id":821346001,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTM0NjAwMQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T17:51:13Z","updated_at":"2021-04-16T17:52:20Z","body":"@mdoering @MattBlissett - an earlier comment by @matdillen hints to that the provenance of GBIF image caches is unclear. If I understand correctly, GBIF keeps an image cache to improve the user experience on gbif.org . It appears that _altered_ copies of the original images are used on the site, and no clear path to unaltered copies is available. Please comment if you'd like to share some more on the background and process of image caching in GBIF infrastructure.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/821346001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/838626925","html_url":"https://github.com/bio-guoda/preston/issues/111#issuecomment-838626925","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/111","id":838626925,"node_id":"MDEyOklzc3VlQ29tbWVudDgzODYyNjkyNQ==","user":{"login":"MattBlissett","id":583320,"node_id":"MDQ6VXNlcjU4MzMyMA==","avatar_url":"https://avatars.githubusercontent.com/u/583320?v=4","gravatar_id":"","url":"https://api.github.com/users/MattBlissett","html_url":"https://github.com/MattBlissett","followers_url":"https://api.github.com/users/MattBlissett/followers","following_url":"https://api.github.com/users/MattBlissett/following{/other_user}","gists_url":"https://api.github.com/users/MattBlissett/gists{/gist_id}","starred_url":"https://api.github.com/users/MattBlissett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MattBlissett/subscriptions","organizations_url":"https://api.github.com/users/MattBlissett/orgs","repos_url":"https://api.github.com/users/MattBlissett/repos","events_url":"https://api.github.com/users/MattBlissett/events{/privacy}","received_events_url":"https://api.github.com/users/MattBlissett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-11T14:58:08Z","updated_at":"2021-05-11T15:03:57Z","body":"Hi @jhpoelen,\r\n\r\nThe image cache is intended to speed up use of the GBIF.org website.  Many providers have large (1MB+) images, which we could not use directly in the [gallery view](https://www.gbif.org/occurrence/gallery), or even on occurrences pages (10MB, 50MB+).  Sometimes, images are provided as TIFF or other file formats.\r\n\r\nThe link to the original image is just below the thumbnails on occurrence pages, labelled \"Identifier\" (the term from the Simple Multimedia extension), and again at the bottom of the page with any other extension data.  Our APIs _only_ have the original URLs, e.g. https://api.gbif.org/v1/occurrence/2595657020\r\n\r\nThe default quality setting in Thumbor is 80, which is why the content of the images changes even without resizing/cropping.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/838626925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/838638264","html_url":"https://github.com/bio-guoda/preston/issues/111#issuecomment-838638264","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/111","id":838638264,"node_id":"MDEyOklzc3VlQ29tbWVudDgzODYzODI2NA==","user":{"login":"PietrH","id":48065851,"node_id":"MDQ6VXNlcjQ4MDY1ODUx","avatar_url":"https://avatars.githubusercontent.com/u/48065851?v=4","gravatar_id":"","url":"https://api.github.com/users/PietrH","html_url":"https://github.com/PietrH","followers_url":"https://api.github.com/users/PietrH/followers","following_url":"https://api.github.com/users/PietrH/following{/other_user}","gists_url":"https://api.github.com/users/PietrH/gists{/gist_id}","starred_url":"https://api.github.com/users/PietrH/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PietrH/subscriptions","organizations_url":"https://api.github.com/users/PietrH/orgs","repos_url":"https://api.github.com/users/PietrH/repos","events_url":"https://api.github.com/users/PietrH/events{/privacy}","received_events_url":"https://api.github.com/users/PietrH/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-11T15:02:49Z","updated_at":"2021-05-11T15:02:49Z","body":"\r\n\r\n> and no clear path to unaltered copies is available.\r\n\r\n@jhpoelen I would go looking into the multimedia extension file of the DwC archive for the original image identifiers, and fetch them directly from the providing image store. But I might be misunderstanding your comment?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/838638264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/838732103","html_url":"https://github.com/bio-guoda/preston/issues/111#issuecomment-838732103","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/111","id":838732103,"node_id":"MDEyOklzc3VlQ29tbWVudDgzODczMjEwMw==","user":{"login":"matdillen","id":37537540,"node_id":"MDQ6VXNlcjM3NTM3NTQw","avatar_url":"https://avatars.githubusercontent.com/u/37537540?v=4","gravatar_id":"","url":"https://api.github.com/users/matdillen","html_url":"https://github.com/matdillen","followers_url":"https://api.github.com/users/matdillen/followers","following_url":"https://api.github.com/users/matdillen/following{/other_user}","gists_url":"https://api.github.com/users/matdillen/gists{/gist_id}","starred_url":"https://api.github.com/users/matdillen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matdillen/subscriptions","organizations_url":"https://api.github.com/users/matdillen/orgs","repos_url":"https://api.github.com/users/matdillen/repos","events_url":"https://api.github.com/users/matdillen/events{/privacy}","received_events_url":"https://api.github.com/users/matdillen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-11T15:55:17Z","updated_at":"2021-05-11T15:55:17Z","body":"> \r\n> \r\n> > and no clear path to unaltered copies is available.\r\n> \r\n> @jhpoelen I would go looking into the multimedia extension file of the DwC archive for the original image identifiers, and fetch them directly from the providing image store. But I might be misunderstanding your comment?\r\n\r\nI think the problem with this is that you'd have to make another request to another server. That request may fail (if the image there has moved or the server has problems) or may be slow and time out. And it increases the overhead of compiling images.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/838732103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/838787342","html_url":"https://github.com/bio-guoda/preston/issues/111#issuecomment-838787342","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/111","id":838787342,"node_id":"MDEyOklzc3VlQ29tbWVudDgzODc4NzM0Mg==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-11T16:28:13Z","updated_at":"2021-05-11T16:31:07Z","body":"The point I am trying to make is that if the provenance of the images are retained as along with the reliably referenced image copies, the corpus can be cloned without have to go back to the original source. Similar to what happens when cloning git repositories. \r\n\r\nSo, for GBIF image cache, you could make explicit the image transformations:\r\n\r\noriginal image -(thumbor with settings X)-> derived image A (e.g., thumbnail)\r\noriginal image -(thumbor with settings Y)-> derived image B (e.g., medium size)\r\noriginal image -(thumbor with settings Z)-> derived image C (e.g., full size)\r\n\r\nwhere the original/derived image is referred to by its content identifiers (e.g., hash, fixity) rather that the location it happened to be at some point.\r\n\r\nthen, on cloning the corpus, you'd include the provenance above as well as the associated images to make sure the image corpus is complete. \r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/838787342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1984520703","html_url":"https://github.com/bio-guoda/preston/issues/111#issuecomment-1984520703","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/111","id":1984520703,"node_id":"IC_kwDOCMmefs52SWH_","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-07T21:21:14Z","updated_at":"2024-03-07T21:21:14Z","body":"Closing stale discussion on how to document the processing of original images by GBIF's image cache.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1984520703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]