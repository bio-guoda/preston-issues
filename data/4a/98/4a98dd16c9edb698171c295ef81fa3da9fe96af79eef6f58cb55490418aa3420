[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/517818083","html_url":"https://github.com/bio-guoda/preston/issues/16#issuecomment-517818083","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/16","id":517818083,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzgxODA4Mw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T19:28:14Z","updated_at":"2019-08-02T19:28:14Z","body":"@mielliott sounds like a great idea. This can even be introduced for older data by inferring the activity uuid via the provenance log content hash. \r\n\r\nI imagine that Query1 / Query2 would be activity UUIDs. These (download) activities are explicitly started by the main crawl activity.\r\n\r\n```\r\nQUERY2 a download activity \r\nQUERY2 startedBy 1340f08c-3e43-45fb-8802-e67243007a65\r\nQUERY2 startedAt \"2019-06-02T11:14:31.733Z\"^^http://www.w3.org/2001/XMLSchema#dateTime\r\n QUERY2  accessed        http://tb.plazi.org/GgServer/dwca/101FFF853C43455BFFFCFFF2361CFFC6.zip\r\nQUERY2  generated       hash://sha256/d9b2527e25e8e5f15879f97c31975a9969f6685da5b2257a7d9211f520c59f03\r\nQUERY2 endedAt \"2019-06-02T11:14:31.733Z\"^^http://www.w3.org/2001/XMLSchema#dateTime\r\n```\r\n\r\nwhere QUERY2 is a randomly generated uuid . Note that I didn't check the prov / pav terms in detail. \r\n\r\nIs this still consistent with what you had in mind?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/517818083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/517854002","html_url":"https://github.com/bio-guoda/preston/issues/16#issuecomment-517854002","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/16","id":517854002,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzg1NDAwMg==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T21:49:08Z","updated_at":"2019-08-02T21:49:32Z","body":"@jhpoelen yes, that's consistent. Even better, maybe, would be to use ```prov:qualifiedGeneration``` as demonstrated [here](https://www.w3.org/TR/2013/REC-prov-o-20130430/#qualified-terms-figure) (Figure 4b). The qualifiedGeneration exists in parallel with the wasGeneratedBy that we currently have, except that it links to properties of the generation, which is exactly what we're trying to achieve. So:\r\n\r\n```shell\r\nHASH    a                           prov:Entity\r\nHASH    prov:wasGeneratedBy         1340f08c-3e43-45fb-8802-e67243007a65\r\nHASH    prov:qualifiedGeneration    QUERY2\r\n\r\nQUERY2  a                   prov:Generation\r\nQUERY2  prov:activity       1340f08c-3e43-45fb-8802-e67243007a65\r\nQUERY2  accessed            http://tb.plazi.org/GgServer/dwca/101FFF853C43455BFFFCFFF2361CFFC6.zip\r\nQUERY2  prov:startedAtTime  \"2019-06-02T11:14:31.733Z\"^^http://www.w3.org/2001/XMLSchema#dateTime\r\nQUERY2  prov:endedAtTime    \"2019-06-02T11:14:31.733Z\"^^http://www.w3.org/2001/XMLSchema#dateTime\r\n```\r\n\r\nThe documentation states that the qualified association implies the unqualified one, and therefore the unqualified isn't strictly necessary, but maybe it should be kept to be consistent with existing Preston logs? Also, I made up that \"accessed\" term. There's also \"used\" and stuff about \"primary sources\", \"retrievedFrom\", etc., but I haven't looked closely at them.\r\n\r\nIf we do want to call it a \"Download\" (for example) instead of a \"Generation\", then we should probably define some ```ex:Download```, ```ex:qualifiedDownload```, and ```ex:wasDownloadedBy``` to keep things consistent, where \"ex\" is some custom Preston namespace. But that would be inconsistent with existing Preston logs, so maybe we should avoid that.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/517854002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/522764642","html_url":"https://github.com/bio-guoda/preston/issues/16#issuecomment-522764642","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/16","id":522764642,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjc2NDY0Mg==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-19T21:39:20Z","updated_at":"2019-08-19T21:39:20Z","body":"@mielliott Your detailed comments helped me to relatively quickly extend Preston to include the suggested linkage via the qualifiedGeneration.\r\n\r\nNow, when running ```preston track https://example.org```, the following output is generated:\r\n\r\n```\r\n<https://preston.guoda.bio> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#SoftwareAgent> .\r\n<https://preston.guoda.bio> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Agent> .\r\n<https://preston.guoda.bio> <http://purl.org/dc/terms/description> \"Preston is a software program that finds, archives and provides access to biodiversity datasets.\"@en .\r\n<dcda260d-c21e-4aed-9d8c-649c5a566a8f> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Activity> .\r\n<dcda260d-c21e-4aed-9d8c-649c5a566a8f> <http://purl.org/dc/terms/description> \"A crawl event that discovers biodiversity archives.\"@en .\r\n<dcda260d-c21e-4aed-9d8c-649c5a566a8f> <http://www.w3.org/ns/prov#startedAtTime> \"2019-08-19T21:34:28.596Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\r\n<dcda260d-c21e-4aed-9d8c-649c5a566a8f> <http://www.w3.org/ns/prov#wasStartedBy> <https://preston.guoda.bio> .\r\n<0659a54f-b713-4f86-a917-5be166a14110> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Entity> .\r\n<0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/dc/terms/description> \"A biodiversity dataset graph archive.\"@en .\r\n<hash://sha256/94806a686babef720d8a600809a766739bd2f62ccf59d7c2de354f9aaba73aa5> <http://www.w3.org/ns/prov#usedBy> <dcda260d-c21e-4aed-9d8c-649c5a566a8f> .\r\n<hash://sha256/3587cb776ce0e4e8237f215800b7dffba0f25865cb84550e87ea8bbac838c423> <http://www.w3.org/ns/prov#generatedAtTime> \"2019-08-19T21:34:29.250Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\r\n<hash://sha256/3587cb776ce0e4e8237f215800b7dffba0f25865cb84550e87ea8bbac838c423> <http://www.w3.org/ns/prov#wasGeneratedBy> <dcda260d-c21e-4aed-9d8c-649c5a566a8f> .\r\n<hash://sha256/3587cb776ce0e4e8237f215800b7dffba0f25865cb84550e87ea8bbac838c423> <http://www.w3.org/ns/prov#qualifiedGeneration> <b991523a-e7c9-4ccd-9bd8-3926351f2517> .\r\n<b991523a-e7c9-4ccd-9bd8-3926351f2517> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Generation> .\r\n<b991523a-e7c9-4ccd-9bd8-3926351f2517> <http://www.w3.org/ns/prov#activity> <dcda260d-c21e-4aed-9d8c-649c5a566a8f> .\r\n<b991523a-e7c9-4ccd-9bd8-3926351f2517> <http://www.w3.org/ns/prov#used> <https://example.org> .\r\n<https://example.org> <http://purl.org/pav/hasVersion> <hash://sha256/3587cb776ce0e4e8237f215800b7dffba0f25865cb84550e87ea8bbac838c423> .\r\n```\r\n\r\nPlease close this issue if this implements the desired functionality. Please note that the timestamps were omitted to avoid redundancy with existing ```prov:generatedAtTime```.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/522764642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/523104409","html_url":"https://github.com/bio-guoda/preston/issues/16#issuecomment-523104409","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/16","id":523104409,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzEwNDQwOQ==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T17:00:19Z","updated_at":"2019-08-20T17:00:19Z","body":"@jhpoelen that's perfect. I'll take a pass at using the new output to make the hash-url-crawl pairings to see if it's enough for what we need. Closing this issue.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/523104409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]