[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301417837","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1301417837","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1301417837,"node_id":"IC_kwDOCMmefs5Nkg9t","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-02T22:23:04Z","updated_at":"2022-11-02T22:23:04Z","body":"Could also limit this to\r\n```shell\r\n$ preston index\r\n```\r\nto index all provenance, not allowing any flexibility. But this is significantly less *fun*","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301417837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301489561","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1301489561","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1301489561,"node_id":"IC_kwDOCMmefs5NkyeZ","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-02T23:30:11Z","updated_at":"2022-11-02T23:34:28Z","body":"I like the piping of things for sure! \r\n\r\nAnd, I was wondering . . . building an index in just another transformation of some provenance logs. . . and has a specific result (the index), so I was wondering whether you had in mind to be able to do things like:\r\n\r\npreston history | preston index | preston process\r\n\r\nwhere, preston process take the nquads generated by the indexing and adds it to the provenance log. \r\n\r\nthe index would generate some dataset containing a bunch of lucene index files (or insert your favorite indexing method).\r\n\r\nNeat thing about this would be that a provenance log would be securely linked to a specific version of an index. With this, you can ask questions like:\r\n\r\nOk Google, can you find me an alias index derived from hash://sha256/abc123 ? \r\n\r\nor\r\n\r\nHey Siri, can you ask Google to find me a taxonomic name index derived from hash://sha256/abc123 ? \r\n\r\n\r\nWould be fun to say out loud right? And, no need to spin those CPUs unnecessarily to regenerate an index that has already been baked somewhere.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301489561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301521773","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1301521773","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1301521773,"node_id":"IC_kwDOCMmefs5Nk6Vt","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T00:32:49Z","updated_at":"2022-11-03T00:32:57Z","body":"Piping is great! I figured `preston index` Should automatically append the index generation info to the provenance log because it’s saving to the blobstore, not just pumping results to stdout\r\n\r\n> Would be fun to say out loud right?\r\n\r\n“hash colon slash slash sha 2 5 6 slash alpha beta 1 2 3 …” sounds great. Everyone loves convenient voice commands","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301521773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301526507","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1301526507","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1301526507,"node_id":"IC_kwDOCMmefs5Nk7fr","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T00:43:07Z","updated_at":"2022-11-03T01:00:52Z","body":"So, to clarify, I imagined building the index in temp/, then zipping everything and tossing it into data/ automatically. Then commands that make use of it (thinking of server commands like `preston s —registry —index hash://sha256/abc`) would unzip it back into tmp/ before using it. But we could keep it ready in an index/ folder so it’s better for one-off commands like `alias`","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301526507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301565641","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1301565641","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1301565641,"node_id":"IC_kwDOCMmefs5NlFDJ","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T02:08:45Z","updated_at":"2022-11-03T02:08:45Z","body":"Nice! I want it!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1301565641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858618208","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1858618208","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1858618208,"node_id":"IC_kwDOCMmefs5uyENg","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T23:53:16Z","updated_at":"2023-12-15T23:53:16Z","body":"using \r\n\r\n```bash\r\n#!/bin/bash\r\n#\r\n# index a patched version of provenance graph associated with an anchor\r\n# into oxigraph  \r\n#\r\n\r\n\r\npreston ls\\\r\n --anchor hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\\\r\n --remote https://linker.bio\\\r\n | sed -E 's/(<)([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})([^ ]*)(>)/<urn:uuid:\\2>/g'\\\r\n | pv -l\\\r\n | ./oxigraph_server_v0.3.22_x86_64_linux_gnu load --lenient --format nq --location preston-gib\r\n```\r\n\r\nI was able to load:\r\n\r\n```\r\n82159896 triples loaded in 1604s (51214 t/s)\r\n```\r\n\r\nwith \r\n```\r\n$ du -d1 -h preston-gib/\r\n33G\tpreston-gib/\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858618208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858620545","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1858620545","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1858620545,"node_id":"IC_kwDOCMmefs5uyEyB","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T23:58:05Z","updated_at":"2023-12-15T23:58:05Z","body":"and then, with ```another-query.sparql``` \r\n\r\n```\r\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\n\r\nSELECT ?o\r\nWHERE {\r\n  <http://collections.mnhn.fr/ipt/archive.do?r=mnhn-ar> <http://purl.org/pav/hasVersion> ?o .\r\n} limit 10\r\n```\r\n\r\nyielding \r\n\r\n```\r\n$ time cat another-query.sparql | ./oxigraph_server_v0.3.22_x86_64_linux_gnu query --location preston-gib/ --results-format tsv\r\n?o\r\n<hash://sha256/08b0b7ff634cf02132f4dc3b41df5f6d3ca3c6d4beb1e6c80fd5245c817d1849>\r\n<hash://sha256/402990fc84d667d2dc68cf760725e43c63f4039ddbc9e59076fa287462cc3273>\r\n<hash://sha256/c5e69606006c807ab7b886df38fdb9709b913c070ecc36a8d0eeb08f6b61887b>\r\n<hash://sha256/8ac3636cfe810ae0f029f08ddd0cfed7e1d6ee0c63f3d7fb0dc809bc06231d62>\r\n<hash://sha256/91f2b225f75f53914d0528a87500249b1f43357f7a27f230ce2f0e1e0e9526e8>\r\n<hash://sha256/c4b005122e24f9385bce87195e7b37ba1bd4790b33470bff2a7d4ad0831e2cc0>\r\n<hash://sha256/d495d171d8c7098a764a49f6721169c1d4aee1a02d69b5ff02831962e7564404>\r\n<hash://sha256/f2fe90d0c11f4990de095d97439a3856d786e487c49b2926f5734d10caf93174>\r\n<hash://sha256/800855c2b73c3fcd5f63340a4e22c90568d13c326c4ee8b70c3f487b38e1bb97>\r\n<hash://sha256/3ce3de0b4038274f2ce3670f69a8f63122706d6d68b987b2436bdb957bab43a5>\r\n\r\nreal\t0m0.060s\r\nuser\t0m0.045s\r\nsys\t0m0.017s\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858620545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858620803","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1858620803","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1858620803,"node_id":"IC_kwDOCMmefs5uyE2D","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T23:58:47Z","updated_at":"2023-12-15T23:58:47Z","body":"@mielliott perhaps we have found our indexer in oxigraph . . . ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858620803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858639567","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1858639567","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1858639567,"node_id":"IC_kwDOCMmefs5uyJbP","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-16T00:33:53Z","updated_at":"2023-12-16T01:25:39Z","body":"Looking up content associated with a GBIF dataset id https://gbif.org/dataset/4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\n\r\n```\r\nurn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\n```\r\n\r\nsee also \r\n\r\n```sparql\r\nSELECT ?archiveUrl ?seenAt ?contentId  \r\nWHERE {\r\n  graph ?g1 {\r\n   <urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e> <http://www.w3.org/ns/prov#hadMember> ?archiveUrl . \r\n   ?archiveUrl <http://purl.org/dc/elements/1.1/format> \"application/dwca\" .\r\n  }\r\n  graph ?activity {\r\n    ?activity <http://www.w3.org/ns/prov#used> ?archiveUrl .\r\n    ?activity <http://www.w3.org/ns/prov#generatedAtTime> ?seenAt .\r\n    ?contentId <http://www.w3.org/ns/prov#qualifiedGeneration> ?activity .  \r\n    }\r\n} limit 10\r\n```\r\n\r\n\r\nyielding \r\n\r\n| ?archiveUrl | ?seenAt | ?contentId |\r\n| --- | --- | --- |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2021-11-02T16:25:42.407Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2022-02-02T06:55:11.184Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2021-12-02T09:24:32.779Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2021-08-03T01:33:39.136Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2021-07-02T12:10:05.604Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2021-09-02T01:07:50.41Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2021-10-01T23:02:46.359Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2022-03-02T02:36:59.419Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2022-01-02T04:40:54.857Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n| <https://hosted-datasets.gbif.org/eBird/2020-eBird-dwca-1.0.zip> | \"2021-11-02T16:25:42.407Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <hash://sha256/b99c3f70f8571cd5bb1d6af84f1dccd5332736e8ac7a96f39e192fe9a7590d1c> |\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858639567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858645840","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1858645840","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1858645840,"node_id":"IC_kwDOCMmefs5uyK9Q","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-16T00:49:13Z","updated_at":"2023-12-16T00:54:17Z","body":"here's a query for, and resulting list of, contentIds associated with our eBird friends. Note that this accounts for the introduction of activity namespaces in 2020 https://github.com/bio-guoda/preston/issues/41 .\r\n\r\n```sparql\r\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r\n\r\nSELECT ?contentId ?seenAt ?archiveUrl WHERE\r\n{ \r\n{\r\n    SELECT ?contentId ?seenAt ?archiveUrl  \r\nWHERE {\r\n  graph ?g1 {\r\n   <urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e> <http://www.w3.org/ns/prov#hadMember> ?archiveUrl . \r\n   ?archiveUrl <http://purl.org/dc/elements/1.1/format> \"application/dwca\" .\r\n  }\r\n  graph ?activity {\r\n    ?activity <http://www.w3.org/ns/prov#used> ?archiveUrl .\r\n    ?activity <http://www.w3.org/ns/prov#generatedAtTime> ?seenAt .\r\n    ?contentId <http://www.w3.org/ns/prov#qualifiedGeneration> ?activity .  \r\n    }\r\n}\r\n}\r\nUNION\r\n{\r\n    SELECT ?contentId ?seenAt ?archiveUrl  \r\nWHERE {\r\n   <urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e> <http://www.w3.org/ns/prov#hadMember> ?archiveUrl . \r\n   ?archiveUrl <http://purl.org/dc/elements/1.1/format> \"application/dwca\" .\r\n    ?activity <http://www.w3.org/ns/prov#used> ?archiveUrl .\r\n    ?activity <http://www.w3.org/ns/prov#generatedAtTime> ?seenAt .\r\n    ?contentId <http://www.w3.org/ns/prov#qualifiedGeneration> ?activity .  \r\n}\r\n}\r\n} ORDER BY ?seenAt \r\n```\r\n\r\nwith\r\n\r\n```\r\ncat ebird.sparql\\\r\n | ./oxigraph_server_v0.3.22_x86_64_linux_gnu query --results-format tsv --location preston-gib/\\\r\n | tee ebird.tsv\r\n```\r\n\r\nwith first 10 yielding \r\n\r\n| ?contentId | ?seenAt | ?archiveUrl |\r\n| --- | --- | --- |\r\n| <hash://sha256/ec3ff57cb48d5c41b77b5d1075738b40f598a900e8be56e7645e5a24013dffc4> | \"2019-12-02T09:51:47.923Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://ebirddata.ornith.cornell.edu/downloads/gbiff/dwca-1.0.zip> |\r\n| <hash://sha256/ee7134043e02f845643b6a655e1c3ffe6d406d0002f8089c5399f0df418b80d6> | \"2019-12-02T10:00:10.182Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://download.gbif.org/2019/03/2019-eBird-dwca-1.0.zip> |\r\n| <https://deeplinker.bio/.well-known/genid/5a12240f-58fe-37ab-be2f-deeca35653c0> | \"2020-01-01T22:15:58.082Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://ebirddata.ornith.cornell.edu/downloads/gbiff/dwca-1.0.zip> |\r\n| <hash://sha256/ee7134043e02f845643b6a655e1c3ffe6d406d0002f8089c5399f0df418b80d6> | \"2020-01-01T22:24:47.774Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://download.gbif.org/2019/03/2019-eBird-dwca-1.0.zip> |\r\n| <https://deeplinker.bio/.well-known/genid/1d102839-ace4-3379-8ff3-2204ebfcae69> | \"2020-02-02T10:02:32.966Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://ebirddata.ornith.cornell.edu/downloads/gbiff/dwca-1.0.zip> |\r\n| <hash://sha256/ee7134043e02f845643b6a655e1c3ffe6d406d0002f8089c5399f0df418b80d6> | \"2020-02-02T10:09:05.545Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://download.gbif.org/2019/03/2019-eBird-dwca-1.0.zip> |\r\n| <https://deeplinker.bio/.well-known/genid/4373758e-5de6-3ebc-bce4-726a03dc8f12> | \"2020-02-11T11:19:58.521Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://ebirddata.ornith.cornell.edu/downloads/gbiff/dwca-1.0.zip> |\r\n| <hash://sha256/ee7134043e02f845643b6a655e1c3ffe6d406d0002f8089c5399f0df418b80d6> | \"2020-02-11T11:28:25.313Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://download.gbif.org/2019/03/2019-eBird-dwca-1.0.zip> |\r\n| <https://deeplinker.bio/.well-known/genid/302b40fb-7610-3402-a711-ccba64635489> | \"2020-03-02T16:20:05.905Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <http://ebirddata.ornith.cornell.edu/downloads/gbiff/dwca-1.0.zip> |\r\n\r\n\r\nand last 10,\r\n\r\n| ?contentId | ?seenAt | ?archiveUrl |\r\n| --- | --- | --- |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-10-01T17:02:42.558Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-10-01T17:02:42.558Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-11-02T04:13:34.257Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-11-02T04:13:34.257Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-11-02T04:13:34.257Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-11-02T04:13:34.257Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-12-02T16:05:25.261Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-12-02T16:05:25.261Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-12-02T16:05:25.261Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n| <hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d> | \"2023-12-02T16:05:25.261Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> | <https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip> |\r\n\r\n\r\nattached \r\n[ebird.tsv.txt](https://github.com/bio-guoda/preston/files/13690890/ebird.tsv.txt)\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858645840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858871762","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1858871762","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1858871762,"node_id":"IC_kwDOCMmefs5uzCHS","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-16T17:01:51Z","updated_at":"2023-12-16T17:01:51Z","body":"> @mielliott perhaps we have found our indexer in oxigraph . . .\r\n\r\nAt long last! Hopefully with no fun surprises like Jena's demanding `urn:uuid` prefixes, etc.\r\n\r\nI should probably mention that I did implement the indexing functionality described in https://github.com/bio-guoda/preston/issues/199#issuecomment-1301489561 in the [registry](https://github.com/bio-guoda/preston/commits/registry/) branch, using Lucene. It never made its way into main though. A big limitation with just using Lucene was the lack of a query language like SPARQL, so instead of writing a `query.sparql` to search the index, I could only do simple string matching.\r\n\r\nDo you plan on packaging oxigraph with preston, or keeping it separate as in your examples?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1858871762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1865038033","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1865038033","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1865038033,"node_id":"IC_kwDOCMmefs5vKjjR","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T19:42:27Z","updated_at":"2023-12-20T19:43:10Z","body":"> Do you plan on packaging oxigraph with preston, or keeping it separate as in your examples?\r\n\r\n@mielliott great question! Not sure yet . . . am almost tempted to treat the oxigraph binaries as assets and add them to the content graph, along with functionality to execute workflows defined in that graph. But other than that, I do not see a compelling reason to merge preston with oxigraph and make it available in a single cli tool. But . . . I we did add a `preston s`command to start a web interface, so why not allow something like `preston sparql --anchor hash://sha256/....` to start a sparql endpoint for a specific biodiversity data graph. . . \r\n\r\nAny ideas? What do you you think, @mielliott ?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1865038033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1865353196","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1865353196","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1865353196,"node_id":"IC_kwDOCMmefs5vLwfs","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T01:33:28Z","updated_at":"2023-12-21T02:41:57Z","body":"I've added some configuration to query the indexed provenance graph of GIB (GBIF, iDigBio, BioCase). The syntax is a bit weird, but [grcl](https://github.com/CLARIAH/grlc/wiki/Quick-tutorial) was quite helpful to get a usable API in front of the sparql endpoint.  \r\n\r\n## Example query by UUID \r\n\r\nusing GBIF's uuid for the eBird dataset (most of GBIF's volume, https://www.gbif.org/dataset/4fa7b334-ce0d-4e88-aaae-2e0c138d049e reformatted to ```urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e```), yield the following last 9 most recent ebird samples as retrieved from their reported origin.\r\n\r\n```\r\ncurl \"https://grlc.io/api-git/bio-guoda/preston-service/uuid.csv?uuid=urn%3Auuid%3A4fa7b334-ce0d-4e88-aaae-2e0c138d049e&endpoint=https%3A%2F%2Flod.globalbioticinteractions.org%2Fquery\"\\\r\n | head\\\r\n | mlr --icsv --oxtab cat\r\n```\r\n\r\n```\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-12-02T16:05:25.261Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-11-02T04:13:34.257Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-10-01T17:02:42.558Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-09-02T12:54:17.912Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-08-02T10:47:52.277Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-07-02T21:02:24.922Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-06-01T19:32:39.368Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-05-01T22:45:13.589Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-04-02T14:43:59.511Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n```\r\n\r\n## Example query by DOI\r\n\r\nUsing GBIF's assigned DOI https://doi.org/10.15468/aomfnb the following can be retrieved:\r\n\r\n```\r\ncurl 'https://grlc.io/api-git/bio-guoda/preston-service/doi.csv?doi=https%3A%2F%2Fdoi.org%2F10.15468%2Faomfnb&endpoint=https%3A%2F%2Flod.globalbioticinteractions.org%2Fquery'\\\r\n | head\\\r\n | mlr --icsv --oxtab cat\r\n```\r\n\r\n```\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-12-02T16:05:25.261Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-11-02T04:13:34.257Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-10-01T17:02:42.558Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-09-02T12:54:17.912Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-08-02T10:47:52.277Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-07-02T21:02:24.922Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-06-01T19:32:39.368Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-05-01T22:45:13.589Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/89704be7d158045b1e615c9d0349baed4f7bd2fe908f33875df09b8c60cff299\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2021-eBird-dwca-1.0.zip\r\nseenAt       2023-04-02T14:43:59.511Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n```\r\n\r\n## Query by URL\r\n\r\nquery activity by known location of a darwin core archive https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip .\r\n\r\n```\r\ncurl 'https://grlc.io/api-git/bio-guoda/preston-service/url.csv?url=https%3A%2F%2Fhosted-datasets.gbif.org%2FeBird%2F2022-eBird-dwca-1.0.zip&endpoint=https%3A%2F%2Flod.globalbioticinteractions.org%2Fquery'\\\r\n | head\\\r\n | mlr --icsv --oxtab cat\r\n```\r\n\r\n```\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-12-02T16:05:25.261Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-11-02T04:13:34.257Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-10-01T17:02:42.558Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-09-02T12:54:17.912Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n```\r\n\r\n## Query by ContentId (aka hash)\r\n\r\nQuerying for a known dwc archive hash hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d \r\n\r\n```\r\nhttps://grlc.io/api-git/bio-guoda/preston-service/hash.csv?hash=hash%3A%2F%2Fsha256%2F1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d&endpoint=https%3A%2F%2Flod.globalbioticinteractions.org%2Fquery\\\r\n | head\\\r\n | mlr --icsv --oxtab cat\r\n```\r\n\r\nyields \r\n\r\n```\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-12-02T16:05:25.261Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-11-02T04:13:34.257Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-10-01T17:02:42.558Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n\r\ndoi          https://doi.org/10.15468/aomfnb\r\nuuid         urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\ncontentId    hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\narchiveUrl   https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nseenAt       2023-09-02T12:54:17.912Z\r\nprovenanceId hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\n```\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1865353196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1867115555","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1867115555","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1867115555,"node_id":"IC_kwDOCMmefs5vSewj","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T01:24:46Z","updated_at":"2023-12-22T01:26:52Z","body":"After some tinkering, I ended up implementing a redirection service.\r\n\r\nThe idea is that the service uses a content registry of known provenance, then redirects resolved content ids to a repository. Currently, the resolver resolves identifiers to their associated darwin core archives.\r\n\r\nYou can resolve by:\r\n\r\n1. GBIF dataset uuid \r\n2. iDigBio recordset uuid\r\n3. doi \r\n4. content id\r\n5. url\r\n\r\nFor identifiers that are *not* uniquely tied to content (e.g., uuid, doi, url), the resolver picks the *most recent* darwin core archive associated with the identifier. So, this implements a kind of a wayback machine for darwin core archives registered in the GBIF/iDigBio universe.  For now, you can find provenance information for the redirect in the 302 http redirect response headers. \r\n\r\n## Example 1. resolve by eBird dataset uuid \r\n\r\n```\r\ncurl -I https://linker.bio/urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\n```\r\n\r\nyields \r\n\r\n```\r\nHTTP/1.1 302 Found\r\n[...]\r\nLocation: https://linker.bio/hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\nETag: hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\nContent-Location: https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\nX-UUID: urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\nX-DOI: https://doi.org/10.15468/aomfnb\r\nX-PROV: hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd\r\nX-PROV-wasInfluencedBy: https://doi.org/10.15468/aomfnb , urn:uuid:4fa7b334-ce0d-4e88-aaae-2e0c138d049e\r\nX-PROV-wasGeneratedBy: urn:uuid:77f3faf7-acd2-4f14-9c0e-4e04ef5b63c7\r\nX-PROV-generatedAtTime: 2023-12-02T16:05:25.261Z\r\nX-PAV-hasVersion: hash://sha256/1e2b7436fce1848f41698e5a9c193f311abaf0ee051bec1a2e48b5106d29524d\r\n[...]\r\n```\r\n\r\nWhere,\r\n```X-PROV``` contains a reference to the specific corpus version . This version defines all the content and their known \r\n\r\n```X-PROV-wasGeneratedBy``` detailing the activity uuid in the corpus version that found the requested content.  \r\n\r\n```X-PROV-generatedAtTime``` detailing the time at which the activity found the requested content was started.  \r\n\r\n```X-PAV-hasVersion``` contains the content id of the content that is redirected to. \r\n\r\n```X-PROV-wasInfluencedBy``` contains the entities that are associated with the redirected content. In this case it is the GBIF eBird dataset UUID and DOI that registered in origin url of the content. \r\n\r\n```Content-Location``` is the original resource location \r\n\r\n```Location``` is the location being redirected to (e.g., https://linker.bio/hash://sha256/....). The client can verify authenticity of the content by inspecting headers, or, perhaps better, the provenance graph itself. \r\n\r\n## Example 2. resolve by eBird dataset DOI\r\n\r\n```\r\ncurl -I https://linker.bio/10.15468/aomfnb\r\n```\r\n\r\nresulting in the same redirection, as expected.\r\n \r\n## Example 3. resolve by eBird dataset original resource location\r\n```\r\ncurl -I https://linker.bio/https://hosted-datasets.gbif.org/eBird/2022-eBird-dwca-1.0.zip\r\n```\r\n\r\nresulting in the same redirection as in examples 1 and 2, as expected.\r\n \r\nThe index is built using oxigraph (see https://github.com/bio-guoda/preston-service/blob/9466c7ac601902b28ff64e7ac83ed6a9a74624a5/query/index-provenance-graph.sh ) and results in a ~30GiB index. This index is then run as a read-only service using https://github.com/bio-guoda/preston-service/blob/9466c7ac601902b28ff64e7ac83ed6a9a74624a5/systemd/system/preston-registry.service . \r\n\r\nThe redirect service is configured to query the index, and redirect to a known content repository via configured defined at  https://github.com/bio-guoda/preston-service/blob/main/systemd/system/preston-redirect.service .\r\n\r\nWith this, we have a service that uses a well-defined relation between identifiers and their associated content. No longer we have to rely on DNS, or dynamic databases, because our redirection is anchor in a specific provenance graph (in this case, the provenance graph with version hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd) .\r\n\r\n@seltmann @mielliott @cboettig - Can you feel the excitement? Curious to hear your thoughts. \r\n\r\nYou should be able to resolve any url/uuid/doi associated with darwin core archives registered with idigbio and gbif. At least, as recorded monthly since late 2018 / early 2019. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1867115555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1867131414","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1867131414","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1867131414,"node_id":"IC_kwDOCMmefs5vSioW","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T01:50:29Z","updated_at":"2023-12-22T16:50:39Z","body":"For a UCSB example . . . I am noticing how there's various ids / locations associated with a specific versioned piece of content - the DwC-A containing the digital collection records and their associated metadata. \r\n\r\n| id | redirect | content id\r\n| --- | --- | --- |\r\n| https://www.gbif.org/dataset/d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0  | https://linker.bio/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0 | hash://sha256/f5d8f67c1eca34cbba1abac12f353585c78bb053bc8ce7ee7e7a78846e1bfc4a |\r\n| https://doi.org/10.15468/w6hvhv | https://linker.bio/10.15468/w6hvhv | hash://sha256/f5d8f67c1eca34cbba1abac12f353585c78bb053bc8ce7ee7e7a78846e1bfc4a |\r\n| https://ecdysis.org/content/dwca/UCSB-IZC_DwC-A.zip | https://linker.bio/https://ecdysis.org/content/dwca/UCSB-IZC_DwC-A.zip | hash://sha256/f5d8f67c1eca34cbba1abac12f353585c78bb053bc8ce7ee7e7a78846e1bfc4a |\r\n| https://www.idigbio.org/portal/recordsets/65007e62-740c-4302-ba20-260fe68da291 | https://linker.bio/urn:uuid:65007e62-740c-4302-ba20-260fe68da291 | hash://sha256/f5d8f67c1eca34cbba1abac12f353585c78bb053bc8ce7ee7e7a78846e1bfc4a |\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1867131414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1868093088","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1868093088","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1868093088,"node_id":"IC_kwDOCMmefs5vWNag","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T21:54:57Z","updated_at":"2023-12-22T21:56:41Z","body":"So, to cite an exact version of a dataset, you can now say something like:\r\n\r\nCheadle Center for Biodiversity and Ecological Restoration (2023). University of California Santa Barbara Invertebrate Zoology Collection. Occurrence dataset https://doi.org/10.15468/w6hvhv as derived from the DwC-A defined in hash://sha256/5b7fa37bf8b64e7c935c4ff3389e36f8dd162f0705410dd719fd089e1ea253cd as gathered through activity urn:uuid:603cb45b-c23e-4d3e-a0bf-604d8537296d at 2023-12-03T06:16:07.462Z\r\n\r\nQuite the mouthful, and precise. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1868093088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1869749994","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1869749994","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1869749994,"node_id":"IC_kwDOCMmefs5vch7q","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T20:09:04Z","updated_at":"2023-12-26T20:09:57Z","body":"Now, with added redirect badges for embedding on web pages . . . \r\n\r\nwith patterns being - \r\n\r\nhttps://linker.bio/badge/[some known url / uuid / doi]\r\n\r\nExample:\r\n\r\n```\r\nhttps://linker.bio/badge/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0\r\n```\r\n\r\nwhich renders to:\r\n\r\n![](https://linker.bio/badge/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0)\r\n\r\nwhich would redirect to the associated content via\r\n\r\nhttps://linker.bio/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0\r\n\r\n\r\n\r\n| id | redirect url | redirect badge | content id\r\n| --- | --- | --- | --- |\r\n| https://www.gbif.org/dataset/d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0  | https://linker.bio/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0 | ![](https://linker.bio/badge/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0) | hash://sha256/f5d8f67c1eca34cbba1abac12f353585c78bb053bc8ce7ee7e7a78846e1bfc4a |\r\n| https://doi.org/10.15468/w6hvhv | https://linker.bio/10.15468/w6hvhv | ![](https://linker.bio/badge/10.15468/w6hvhv) | hash://sha256/f5d8f67c1eca34cbba1abac12f353585c78bb053bc8ce7ee7e7a78846e1bfc4a |\r\n| https://ecdysis.org/content/dwca/UCSB-IZC_DwC-A.zip | https://linker.bio/https://ecdysis.org/content/dwca/UCSB-IZC_DwC-A.zip | ![](https://linker.bio/badge/https://ecdysis.org/content/dwca/UCSB-IZC_DwC-A.zip) | hash://sha256/f5d8f67c1eca34cbba1abac12f353585c78bb053bc8ce7ee7e7a78846e1bfc4a |\r\n| https://www.idigbio.org/portal/recordsets/65007e62-740c-4302-ba20-260fe68da291 | https://linker.bio/urn:uuid:65007e62-740c-4302-ba20-260fe68da291 | ![](https://linker.bio/badge/urn:uuid:65007e62-740c-4302-ba20-260fe68da291) | hash://sha256/f5d8f67c1eca34cbba1abac12f353585c78bb053bc8ce7ee7e7a78846e1bfc4a |\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1869749994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1872423618","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1872423618","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1872423618,"node_id":"IC_kwDOCMmefs5vmurC","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-30T01:49:32Z","updated_at":"2023-12-30T01:50:40Z","body":"@seltmann you can check whether your UCSB collection is tracked by Preston by embedding DwC-A and EML download buttons on your respective pages using GBIF Dataset DOI, DwC-A  endpoint urls, GBIF Dataset UUID, iDigBIo recordset UUIDs - \r\n\r\n\r\ne.g., \r\nhttps://www.gbif.org/dataset/d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0\r\n\r\ncan be used as\r\n\r\nurn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0\r\n\r\nto get most recent archived/tracked related DwC-A content using\r\n\r\nhttps://linker.bio/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0\r\n\r\nhttps://linker.bio/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0\r\n\r\nwith badge uri\r\n\r\nhttps://linker.bio/badge/urn:uuid:d6097f75-f99e-4c2a-b8a5-b0fc213ecbd0\r\n\r\n![image](https://github.com/bio-guoda/preston/assets/1084872/6b8611fc-c8e1-4e8e-9132-3c458f11c2a7)\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1872423618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1876055905","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1876055905","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1876055905,"node_id":"IC_kwDOCMmefs5v0ldh","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T22:27:21Z","updated_at":"2024-01-03T22:27:47Z","body":"@seltmann please note that I've redesigned the badge to be a FAIR assessment badge. \r\n\r\nSo, without further ado:\r\n\r\ndrum roll. . . . \r\n\r\nCongratulations to @seltmann and colleagues: UCSB-IZC is FAIR!\r\n\r\nAccessed from https://linker.bio/#use-case-4-assessing-fairness-of-biodiversity-data on 2024-01-03 - \r\n\r\n![image](https://github.com/bio-guoda/preston/assets/1084872/fcef81c1-925c-496b-9466-c9e521d33c30)\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1876055905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1876070818","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1876070818","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1876070818,"node_id":"IC_kwDOCMmefs5v0pGi","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T22:43:34Z","updated_at":"2024-01-03T22:43:34Z","body":"See also https://discourse.gbif.org/t/assessing-fairness-of-biodiversity-data-through-badges-and-download-buttons/4246","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1876070818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1877522312","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1877522312","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1877522312,"node_id":"IC_kwDOCMmefs5v6LeI","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T17:51:05Z","updated_at":"2024-01-04T17:51:05Z","body":"Amazing stuff @jhpoelen, very _fun_! I noticed the badges default to calling stuff a DwC-A if the content type is unknown or the content doesn't exist:\r\n\r\nhttps://github.com/bio-guoda/preston/blob/8a912a4b1152f7d8c381cb322c4886d64ee3b687/preston-serve/src/main/java/bio/guoda/preston/server/RedirectingServlet.java#L81-L89\r\n\r\nAnd this kinda confused me when toying around with the new badge feature, asking for badges of silly things like RSS feeds or fake IDs. I can see this causing some confusion if for example something goes wrong for someone's EML/etc. badge, causing linker.bio to instead make a \"DwC-A\" badge. May I suggest a more unassuming badge when content type can't be determined? A more general \"Content\", \"Error\", or just blank? Or maybe there's an \"unknown\" MimeType or similar.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1877522312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1877575117","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1877575117","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1877575117,"node_id":"IC_kwDOCMmefs5v6YXN","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T18:33:00Z","updated_at":"2024-01-04T18:34:36Z","body":"@mielliott thanks for sharing your thoughts. I can see how a badge with \"DwC-A unknown\" can be confusing, especially when plugging in any kind of stuff like https://linker.bio/badge/10.12/345 .\r\n![image](https://github.com/bio-guoda/preston/assets/1084872/f31695d9-b1fc-44e5-bbfb-fdc41a492ad3)\r\n What the badge is trying to say is: I couldn't find any trace of a DwC archive associated with \"10.12/345\". So even if some content is associated with \"10.12/345\" but it wasn't intended to be DwC, it'll still show the \"DwC-A unknown\" badge. \r\n\r\nSo requesting:\r\n\r\nhttps://linker.bio/badge/10.12/345 \r\n\r\nis equivalent to asking:\r\n\r\nhttps://linker.bio/badge/10.12/345?type=application/dwca \r\n\r\nWith this information, would you have any suggestions on how to make the \"DwC-A unknown\" badge less confusing and more informative? \r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1877575117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1886228869","html_url":"https://github.com/bio-guoda/preston/issues/199#issuecomment-1886228869","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/199","id":1886228869,"node_id":"IC_kwDOCMmefs5wbZGF","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-11T04:36:05Z","updated_at":"2024-01-11T04:36:05Z","body":"How about like https://linker.bio/badge/10.12/345?type=cats?\r\n\r\n![image](https://github.com/bio-guoda/preston/assets/9602463/a4930f97-2b8b-46a8-a585-c98f3a863bc5)\r\nIn this case I'd argue that being _less informative_ is _less confusing_\r\n\r\nPS - I really like the feature to specify the content type 🙌","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1886228869/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]