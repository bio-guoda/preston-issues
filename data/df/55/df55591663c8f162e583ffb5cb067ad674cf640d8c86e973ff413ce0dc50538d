[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645123922","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-645123922","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":645123922,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTEyMzkyMg==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T03:23:39Z","updated_at":"2020-06-17T03:25:40Z","body":"I stopped `TikaHashingActivity` from emitting `<activityUUID> <used> <hash://sha256/blubbub>` because that statement was causing the activity to keep running in an endless loop. I can't think of a nice way to prevent that statement from running another tika-tlsh hashing activity. The `uses` statement was also a little redundant with `<hash://tika-tlsh/blahblah> <wasDerivedFrom> <hash://sha256S/blubbub> <activityUUID> .`, so I don't think anyone will miss it much. Now we see something like this:\r\n```\r\n<something> <isRelatedTo> <hash://sha256/blabla> .\r\n<3f531feb-6139-4c07-839a-474c3ec8c7ba> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Activity> <3f531feb-6139-4c07-839a-474c3ec8c7ba> .\r\n<hash://tika-tlsh/532a4237d1782aa7576f40d213f91ce46b1fb886498bebcedc507680db323a9415f> <http://www.w3.org/ns/prov#wasDerivedFrom> <hash://sha256/blabla> <3f531feb-6139-4c07-839a-474c3ec8c7ba> .\r\n<hash://tika-tlsh/532a4237d1782aa7576f40d213f91ce46b1fb886498bebcedc507680db323a9415f> <http://www.w3.org/ns/prov#wasGeneratedBy> <3f531feb-6139-4c07-839a-474c3ec8c7ba> <3f531feb-6139-4c07-839a-474c3ec8c7ba> .\r\n```\r\nAlso, I stopped the tika-tlsh hashing activity from running when it sees \"hash://tika-tlsh/...\" in the subject, so the last two lines no longer cause the activity to run again. I'm gonna assume that's good enough for now.\r\n\r\n@jhpoelen feel free to close this issue if you don't object to these changes.\r\n\r\nedit: changes to `TikaHashingActivity` are in 3f9f62028ac831e157446d8a11303133943898b0","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645123922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645404594","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-645404594","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":645404594,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTQwNDU5NA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T14:21:37Z","updated_at":"2020-06-17T14:21:37Z","body":"Hey @mielliott - thanks for having a look at this. Why not simply prevent generated messages from getting inserted into the processing queue and only accept new quads from stdin? ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645404594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645475734","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-645475734","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":645475734,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTQ3NTczNA==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T16:21:48Z","updated_at":"2020-06-17T17:29:50Z","body":"I was reluctant to give up that beautiful feature of preston. If we do that, then the tikatlsh processor still won't be able to play with other processors in the future. I guess that's okay for now though.\r\n\r\nDoing what you suggest might look like this:\r\n```java\r\n@Parameters(separators = \"= \", commandDescription = \"Generates Tika TLSH associated with any encountered hash://sha256 IRIs\")\r\npublic class CmdTika extends CmdProcess {\r\n\r\n    @Override\r\n    protected Stream<StatementListener> createProcessors(BlobStore blobStore, StatementListener queueAsListener) {\r\n        return Stream.empty();\r\n    }\r\n\r\n    @Override\r\n    void processQueue(Queue<Quad> statementQueue, BlobStore blobStore, ActivityContext ctx, StatementListener[] listeners) {\r\n        StatementListener[] processors = Stream.of(\r\n                new TikaHashingActivity(blobStore, statementQueue::add)\r\n        ).toArray(StatementListener[]::new);\r\n\r\n        StatementEmitter emitter = statement -> {\r\n            handleStatement(statement, listeners);\r\n            handleStatement(statement, processors);\r\n            handleQueuedMessages(statementQueue, listeners);\r\n        };\r\n        handleQueuedMessages(statementQueue, new StatementListener[]{(StatementListener) statement -> emitter.emit(statement)});\r\n        new EmittingStreamRDF(emitter, this).parseAndEmit(getInputStream());\r\n    }\r\n}\r\n```\r\nIt passes the CmdTikaTests. Let me know if you prefer this and I'll make the changes.\r\n\r\nedit: made processors listen during first pass over `statementQueue`","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645475734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645481984","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-645481984","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":645481984,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTQ4MTk4NA==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T16:32:48Z","updated_at":"2020-06-17T16:32:48Z","body":"Actually, that code does not let `processors` listen in the first pass over `statementQueue`. I'll fix that. You get the idea though.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645481984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645489307","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-645489307","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":645489307,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTQ4OTMwNw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T16:45:53Z","updated_at":"2020-06-17T16:45:53Z","body":"Thanks for sharing the example. I see the tika-tlsh processor independent from how the queue is managed, so you'd still be able to use the processor in other commands / workflows. I'll have a look at the implementation shortly and hoping to discuss in today's meeting.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645489307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645494201","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-645494201","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":645494201,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTQ5NDIwMQ==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T16:53:25Z","updated_at":"2020-06-17T16:53:25Z","body":"> I see the tika-tlsh processor independent from how the queue is managed, so you'd still be able to use the processor in other commands / workflows\r\n\r\nBut it explodes if it reads from the same queue that it writes to. If we use the tika-tlsh processor in the `update` or `process` commands, it will explode. Right? Looking forward to discussing this.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645494201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645510125","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-645510125","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":645510125,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTUxMDEyNQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T17:20:24Z","updated_at":"2020-06-17T17:20:24Z","body":"I think some context is needed for the Activity to be somewhat smart about making a decision to process or not. Perhaps if we emit a graph (a collection of related statements) instead of individual statements, an activity like TikaTLSH can decide to not process statement originating from a named graph that was produced by that same TikaTLSH in the past.\r\n\r\nSo, instead of:\r\n\r\n```java\r\nQuad statement = ...\r\nsomething.emit(statement)\r\n```\r\n\r\nwe'd say:\r\n\r\n```java\r\nGraph<Quad> graph = ...\r\nsomething.emit(graph)\r\n```\r\n\r\nor similarly:\r\n\r\n```java\r\nList<Quad> statements = ...\r\nsomething.emit(statements)\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645510125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645524186","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-645524186","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":645524186,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTUyNDE4Ng==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T17:47:55Z","updated_at":"2020-06-17T17:47:55Z","body":"I'm all for that. We discussed something very similar in the past when trying to link activities with `wasInformedBy` statements, but I don't think we had considered that it could address some recursive loop issues.\r\n\r\nSince all of our processors group their generated statements as inputs to a`emitAsNewActivity`/`emitAsNamedActivity` function, we already have a little bit of a batch messaging structure in place.\r\n\r\nNote that this would only let us detect \"one-step\" cycles (A -> A), but we could still have multi-step cycles (A -> B -> A). If we use a `Graph` struct as you proposed, we would have the option of extending it in the future, if needed, to keep some memory to detect multi-step cycles.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/645524186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/646089193","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-646089193","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":646089193,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjA4OTE5Mw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T15:17:38Z","updated_at":"2020-06-18T15:17:38Z","body":"hey @mielliott - I implemented the emitting of quads in batch. You'll find a StatementsEmitter that extends the (old) StatementEmitter . Also, I implemented the TikaActivity to accept quad batches (i.e. ```List<Quad>```) so that a batch can be queried for pre-existing ```tika-tlsh``` hashes. If the TikaActivity finds one in incoming quads, then they are ignored. Otherwise, an attempt is made to generate a tika hash. \r\n\r\nHere's a results of running the command :\r\n```\r\n$ preston ls | grep hash | head -n1 | preston tika\r\n```\r\nagainst the https://github.com/bio-guoda/preston-amazon preston archive:\r\n\r\n```\r\n<https://preston.guoda.bio> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#SoftwareAgent> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<https://preston.guoda.bio> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Agent> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<https://preston.guoda.bio> <http://purl.org/dc/terms/description> \"Preston is a software program that finds, archives and provides access to biodiversity datasets.\"@en <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<1be59399-1671-4313-a8a3-7a0fb22dbe47> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Activity> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<1be59399-1671-4313-a8a3-7a0fb22dbe47> <http://purl.org/dc/terms/description> \"An event that (re-) processes existing biodiversity datasets graphs and their provenance.\"@en <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<1be59399-1671-4313-a8a3-7a0fb22dbe47> <http://www.w3.org/ns/prov#startedAtTime> \"2020-06-18T14:55:37.298Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<1be59399-1671-4313-a8a3-7a0fb22dbe47> <http://www.w3.org/ns/prov#wasStartedBy> <https://preston.guoda.bio> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<https://doi.org/10.5281/zenodo.1410543> <http://www.w3.org/ns/prov#usedBy> <1be59399-1671-4313-a8a3-7a0fb22dbe47> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<https://doi.org/10.5281/zenodo.1410543> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.org/dc/dcmitype/Software> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<https://doi.org/10.5281/zenodo.1410543> <http://purl.org/dc/terms/bibliographicCitation> \"Jorrit Poelen, Icaro Alzuru, & Michael Elliott. 2019. Preston: a biodiversity dataset tracker (Version 0.0.1-SNAPSHOT) [Software]. Zenodo. http://doi.org/10.5281/zenodo.1410543\"@en <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<0659a54f-b713-4f86-a917-5be166a14110> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Entity> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/dc/terms/description> \"A biodiversity dataset graph archive.\"@en <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<hash://sha256/b74feb682bddfd910dadb270a461cf456aaaed1b66d4e72713c5ec1029ae5b99> <http://www.w3.org/ns/prov#usedBy> <1be59399-1671-4313-a8a3-7a0fb22dbe47> <1be59399-1671-4313-a8a3-7a0fb22dbe47> .\r\n<a8aa5056-05d2-44fe-ad57-9a833646e800> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Activity> <a8aa5056-05d2-44fe-ad57-9a833646e800> .\r\n<a8aa5056-05d2-44fe-ad57-9a833646e800> <http://www.w3.org/ns/prov#wasInformedBy> <1be59399-1671-4313-a8a3-7a0fb22dbe47> <a8aa5056-05d2-44fe-ad57-9a833646e800> .\r\n<hash://tika-tlsh/10f6d70066bf1f349ff4abab09c19cf1ba28b76949084cd259fb0f12251636d2a47> <http://www.w3.org/ns/prov#wasDerivedFrom> <hash://sha256/b74feb682bddfd910dadb270a461cf456aaaed1b66d4e72713c5ec1029ae5b99> <a8aa5056-05d2-44fe-ad57-9a833646e800> .\r\n<a8aa5056-05d2-44fe-ad57-9a833646e800> <http://www.w3.org/ns/prov#used> <hash://sha256/b74feb682bddfd910dadb270a461cf456aaaed1b66d4e72713c5ec1029ae5b99> <a8aa5056-05d2-44fe-ad57-9a833646e800> .\r\n<hash://tika-tlsh/10f6d70066bf1f349ff4abab09c19cf1ba28b76949084cd259fb0f12251636d2a47> <http://www.w3.org/ns/prov#wasGeneratedBy> <a8aa5056-05d2-44fe-ad57-9a833646e800> <a8aa5056-05d2-44fe-ad57-9a833646e800> .\r\n<hash://sha256/6d86c332b045e74fe4410f79655a1f47596808c057f30779b9584dba38fa25d5> <http://www.w3.org/ns/prov#generatedAtTime> \"2018-09-05T08:34:19.891Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\r\n<6cc1cc20-6631-4ad2-8e17-c01ddbcdda95> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Activity> <6cc1cc20-6631-4ad2-8e17-c01ddbcdda95> .\r\n<hash://tika-tlsh/282ee27a09f35136a5b950bfe468747e3f258f6e5ca14094940f9914ce30b7371ca> <http://www.w3.org/ns/prov#wasDerivedFrom> <hash://sha256/6d86c332b045e74fe4410f79655a1f47596808c057f30779b9584dba38fa25d5> <6cc1cc20-6631-4ad2-8e17-c01ddbcdda95> .\r\n<6cc1cc20-6631-4ad2-8e17-c01ddbcdda95> <http://www.w3.org/ns/prov#used> <hash://sha256/6d86c332b045e74fe4410f79655a1f47596808c057f30779b9584dba38fa25d5> <6cc1cc20-6631-4ad2-8e17-c01ddbcdda95> .\r\n<hash://tika-tlsh/282ee27a09f35136a5b950bfe468747e3f258f6e5ca14094940f9914ce30b7371ca> <http://www.w3.org/ns/prov#wasGeneratedBy> <6cc1cc20-6631-4ad2-8e17-c01ddbcdda95> <6cc1cc20-6631-4ad2-8e17-c01ddbcdda95> .\r\n```\r\n\r\nNote that I was able to re-introduce the statement ```<6cc1cc20-6631-4ad2-8e17-c01ddbcdda95> <http://www.w3.org/ns/prov#used> <hash://sha256/6d86c332b045e74fe4410f79655a1f47596808c057f30779b9584dba38fa25d5> ``` without having to worry about an endless re-processing of commands. If needed, the tika hash activity can be describe explicitly with some UUID to allow for more explicit filtering of Tika activity output.\r\n\r\nPlease produce above and close issue.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/646089193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/647636619","html_url":"https://github.com/bio-guoda/preston/issues/65#issuecomment-647636619","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/65","id":647636619,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NzYzNjYxOQ==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-22T16:39:47Z","updated_at":"2020-06-22T16:39:47Z","body":"Nice! I tried it and got the same output. Closing issue.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/647636619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]