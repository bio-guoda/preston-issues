[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724298672","html_url":"https://github.com/bio-guoda/preston/issues/100#issuecomment-724298672","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/100","id":724298672,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDI5ODY3Mg==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-09T21:49:21Z","updated_at":"2020-11-09T21:49:21Z","body":"I can confirm that:\r\n\r\n```\r\n$ java -jar preston.jar get 'hash://sha256/94a4fc4824d951c55860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062' | sha256sum\r\n94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062  -\r\n```\r\nwith preston v0.0.10 (the one that comes with https://github.com/bio-guoda/preston-amazon)\r\n\r\nhowever, when running v0.2.3 :\r\n```\r\n preston get 'hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062' | sha256sum\r\njava.io.IOException: problem retrieving [hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062]\r\n\tat bio.guoda.preston.cmd.CmdGet.handleContentIri(CmdGet.java:73)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:51)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:38)\r\n\tat bio.guoda.preston.cmd.CmdLine.run(CmdLine.java:18)\r\n\tat bio.guoda.preston.cmd.CmdLine.run(CmdLine.java:26)\r\n\tat bio.guoda.preston.Preston.main(Preston.java:19)\r\nCaused by: java.io.IOException: failed to resolve to content\r\n\tat bio.guoda.preston.cmd.CmdGet$ContentQuery.dereference(CmdGet.java:111)\r\n\tat bio.guoda.preston.cmd.CmdGet.processQuery(CmdGet.java:78)\r\n\tat bio.guoda.preston.cmd.CmdGet.handleContentIri(CmdGet.java:70)\r\n\t... 5 more\r\ne3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855  -\r\n```\r\nwith \r\n\r\n```\r\n$ preston version\r\n0.2.3\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724298672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724299644","html_url":"https://github.com/bio-guoda/preston/issues/100#issuecomment-724299644","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/100","id":724299644,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDI5OTY0NA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-09T21:51:31Z","updated_at":"2020-11-09T21:51:31Z","body":"However, when running:\r\n\r\n```\r\n$ preston get 'zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/eml.xml' \r\n<?xml version='1.0' encoding='utf-8'?><eml:eml xmlns:eml=\"eml://ecoinformatics.org/eml-2.0.1\" xmlns:md=\"eml://ecoinformatics.org/methods-2.0.1\" xmlns:proj=\"eml://ecoinformatics.org/project-2.0.1\" xmlns:d=\"eml://ecoinformatics.org/dataset-2.0.1\" xmlns:res=\"eml://ecoinformatics.org/resource-2.0.1\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:dc=\"http://purl.org/dc/terms/\" system=\"Plazi\" scope=\"system\" packageId=\"FFF76241FFB3B773A711FF98DF6BFFF3/eml-1519775222262.xml\"><dataset><alternateIdentifier>FFF76241FFB3B773A711FF98DF6BFFF3</alternateIdentifier><alternateIdentifier>http://dx.doi.org/10.3897/zookeys.740.14640</alternateIdentifier><a\r\n```\r\n\r\ncontent is returned as expected. . . ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724299644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724420861","html_url":"https://github.com/bio-guoda/preston/issues/100#issuecomment-724420861","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/100","id":724420861,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDQyMDg2MQ==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-10T03:10:31Z","updated_at":"2020-11-10T03:10:44Z","body":"It's fixed now:\r\n```\r\n$ preston get 'hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062' | sha256sum\r\n94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062  -\r\n```\r\n\r\nHappy 100th issue!","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724420861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724770481","html_url":"https://github.com/bio-guoda/preston/issues/100#issuecomment-724770481","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/100","id":724770481,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDc3MDQ4MQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-10T15:20:08Z","updated_at":"2020-11-10T15:20:08Z","body":"@mielliott Thanks for fixing and for adding the test cases!\n\nThe ContentQuery implementation of the CmdGet class looks pretty neat.\n\nIn a way it is a content resolver (dereferencer) that uses a content-based universe (content hash, blobstore) instead of the location-based universe (url and http client).\n\nDid you consider to make the ContentQuery implement the Dereferencer<InputStream> interface?\n\n\n\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724770481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724828440","html_url":"https://github.com/bio-guoda/preston/issues/100#issuecomment-724828440","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/100","id":724828440,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDgyODQ0MA==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-10T16:51:30Z","updated_at":"2020-11-10T16:51:30Z","body":"> Did you consider to make the ContentQuery implement the Dereferencer<InputStream> interface?\r\n\r\nOoh, good idea. The suggested change is implemented in bf3465cca131c5781dcce3cec2aaa880859a7941.\r\n\r\nI've also put the \"get bytes identified by a content query\" logic into it's own ContentDerefencer class (see bf4d2aa6fa70b4c066079e387949cf6a483659d4). I feel like this could be useful for all sorts of applications.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/724828440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]