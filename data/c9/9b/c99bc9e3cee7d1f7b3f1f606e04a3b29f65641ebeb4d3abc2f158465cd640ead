[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/696997828","html_url":"https://github.com/bio-guoda/preston/issues/72#issuecomment-696997828","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/72","id":696997828,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Njk5NzgyOA==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T21:42:05Z","updated_at":"2020-09-22T21:42:05Z","body":"@jhpoelen \r\n> https://github.com/bio-guoda/preston/issues/79#issuecomment-696990120 @mielliott Nice! Oef, I find these text encodings are tricky. btw - I'd much like to start using your URL finder for digging up image urls. Can you add usage example in the use case section of the readme?\r\n\r\nI'm working on making a command to use the URL finder, but it's not quite finished yet. My current idea is to do something like\r\n```\r\npreston ls | preston match [your-regex-here]\r\n```\r\nor, if you're looking for URLs,\r\n```\r\npreston ls | preston match --pattern=url\r\n```\r\nor something along those lines. Or we could make an alias of `preston match` (or whatever the command ends up being called) specifically for URLs,\r\n```\r\npreston ls | preston find-urls\r\n```\r\nI'm busy at the moment, but I will try to finish it up later tonight (and post that usage example to the readme). In the meantime, feel free to holler if you have any ideas/concerns about the command syntax. Thanks!","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/696997828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/697127136","html_url":"https://github.com/bio-guoda/preston/issues/72#issuecomment-697127136","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/72","id":697127136,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzEyNzEzNg==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-23T04:29:02Z","updated_at":"2020-10-13T14:40:55Z","body":"@jhpoelen There's now a working `preston match` command (I haven't created a new release though). See https://github.com/bio-guoda/preston#finding-text-in-tracked-contents.\r\n\r\n~~Note that `preston match`'s output is saved as a new entry in the provenance history, just like `preston tika` and `preston similar`.~~ As of 0e9e3481497cd173e1befbca1de6c6b621083f70, `preston match` no longer appends to the provenance history.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/697127136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/708495116","html_url":"https://github.com/bio-guoda/preston/issues/72#issuecomment-708495116","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/72","id":708495116,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODQ5NTExNg==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T15:53:39Z","updated_at":"2020-10-14T15:53:39Z","body":"It may be useful to allow `preston match` to output the locations of regex groups as well as full regex matches. For example (thinking about #86),\r\n\r\nWithout groups:\r\n```\r\n$ preston match [regex without groups]\r\n<cut:hash://blahblah!/b15-63> <is> \"http://arctos.database.museum/guid/DMNS:Para:784\"\r\n<cut:hash://blubblub!/b115-173> <is> \"http://arctos.database.museum/guid/DMNS:Para:784?seid=4324\"\r\n```\r\n\r\nWith groups:\r\n```\r\n$ preston match [regex with groups]\r\n<cut:hash://blahblah!/b15-73> <is> \"http://arctos.database.museum/guid/DMNS:Para:784\"\r\n<cut:hash://blubblub!/b115-173> <is> \"http://arctos.database.museum/guid/DMNS:Para:784?seid=4324\"\r\n<cut:hash://blahblah!/b60-73> <is> \"DMNS:Para:784\"\r\n<cut:hash://blubblub!/b115-128> <is> \"DMNS:Para:784\"\r\n```\r\n\r\nSure, we could also do something like `preston match \"letters:letters:numbers\", but there might be cases where we want to look for some context around the text we're searching for. In the above example, maybe we only want to find text with the prefix \"http://arctos.database.museum/guid/\" or \"http://another.museum/\". Or maybe we'd want to match a full specimen record (e.g. match whole lines in an occurrence.tsv) and at the same time extract some pieces of information from it (e.g. columns 2 and 3).\r\n\r\nTo make it even more fun, the matched groups could be linked to the full match. Something along the lines of\r\n```\r\n<cut:hash://blahblah!/b15-73> <is> \"http://arctos.database.museum/guid/DMNS:Para:784\"\r\n<cut:hash://blahblah!/b60-73> <is> \"DMNS:Para:784\"\r\n<cut:hash://blahblah!/b60-73> <foundIn> <cut:hash://blahblah!/b15-73>\r\n```\r\n\r\nJust some thoughts.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/708495116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/712437507","html_url":"https://github.com/bio-guoda/preston/issues/72#issuecomment-712437507","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/72","id":712437507,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjQzNzUwNw==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T20:57:03Z","updated_at":"2020-10-19T20:57:03Z","body":"`preston match` now reports group matches. If I search through a file containing the text\r\n```text\r\nthe duck is in the pond\r\n```\r\nand run `preston match` using the regex\r\n```regex\r\n\"the (?<what>\\\\S+) is in the (?<where>\\\\S+)\"\r\n```\r\nit should output\r\n```\r\n<cut:hash://sha256/blub!/b1-23> <http://www.w3.org/ns/prov#value> \"the duck is in the pond\" .\"\r\n<cut:hash://sha256/blub!/b5-8> <http://www.w3.org/ns/prov#value> \"duck\" .\"\r\n<cut:hash://sha256/blub!/b1-23> <http://www.w3.org/ns/prov#hadMember> <cut:hash://sha256/blub!/b5-8> .\"\r\n<cut:hash://sha256/blub!/b20-23> <http://www.w3.org/ns/prov#value> \"pond\" .\"\r\n<cut:hash://sha256/blub!/b1-23> <http://www.w3.org/ns/prov#hadMember> <cut:hash://sha256/blub!/b20-23> .\"\r\n```\r\n\r\nNote that, to prevent `preston match` from reporting matches for groups we don't care about, they need to be designated as non-capturing groups, e.g. `(?>dontreportme)` instead of `(doreportme)`. Not sure if this is desirable behavior.\r\n\r\nAlso, a fun extension would be to have preston link each reported group match with the name of the group (if specified). In the above regex\r\n```regex\r\n\"the (?<what>\\\\S+) is in the (?<where>\\\\S+)\"\r\n```\r\nwe could associate \"duck\" with the `<what>` group and \"pond\" with the `<where>` group. This would allow the user to include some unique semantics in the output to make it easier to work with.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/712437507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/712487814","html_url":"https://github.com/bio-guoda/preston/issues/72#issuecomment-712487814","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/72","id":712487814,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjQ4NzgxNA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T23:02:27Z","updated_at":"2020-10-19T23:02:27Z","body":"I tried it and was able to reproduce your example. \r\n\r\nVery neat! ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/712487814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]