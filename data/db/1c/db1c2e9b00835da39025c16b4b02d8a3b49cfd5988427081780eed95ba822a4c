{"url":"https://api.github.com/repos/bio-guoda/preston/issues/18","repository_url":"https://api.github.com/repos/bio-guoda/preston","labels_url":"https://api.github.com/repos/bio-guoda/preston/issues/18/labels{/name}","comments_url":"https://api.github.com/repos/bio-guoda/preston/issues/18/comments","events_url":"https://api.github.com/repos/bio-guoda/preston/issues/18/events","html_url":"https://github.com/bio-guoda/preston/issues/18","id":486058210,"node_id":"MDU6SXNzdWU0ODYwNTgyMTA=","number":18,"title":"past crawl logs missing some wasGeneratedBy lines","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-08-27T22:08:01Z","updated_at":"2019-09-17T18:26:53Z","closed_at":"2019-09-17T18:26:53Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"For crawls up to and including 2019-01-07, about 2/3 of URL queries do not have an accompanying ```wasGeneratedBy```.\r\n\r\nFor example, URLs from portal.torcherbaria.org in the 2019-01-07 crawl log (hash://sha256/a7a5e7c6a4b21bdf67f48d6bea85f438b8133f674027b04625dfadec3ff985f6):\r\n```shell\r\n...\r\n<http://portal.torcherbaria.org/portal/content/dwca/TAC_DwC-A.zip> <http://purl.org/dc/elements/1.1/format> \"application/dwca\" .\r\n<http://portal.torcherbaria.org/portal/content/dwca/TAC_DwC-A.zip> <http://purl.org/pav/hasVersion> <hash://sha256/e961b979c14f4275918c7e9280b899d3a141b9129edbabe6d243f1aa6f96d524> .\r\n<hash://sha256/72a78747b822a861abd4bb4e1af1e250a2521c6f070c60308eb0a9d18fafdf00> <http://www.w3.org/ns/prov#generatedAtTime> \"2018-08-31T18:38:43.091Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> .\r\n<hash://sha256/72a78747b822a861abd4bb4e1af1e250a2521c6f070c60308eb0a9d18fafdf00> <http://www.w3.org/ns/prov#hadMember> <6ade07ee-25bf-49c8-ae19-f7c225f70422> .\r\n...\r\n```\r\n\r\nCrawl logs up to 2019-01-07 have fewer ```wasGeneratedBy``` than  ```hasVersion``` statements:\r\n```shell\r\n$ preston get hash://sha256/a7a5e7c6a4b21bdf67f48d6bea85f438b8133f674027b04625dfadec3ff985f6 | grep \"wasGeneratedBy\" | wc -l\r\n30602\r\n$ preston get hash://sha256/a7a5e7c6a4b21bdf67f48d6bea85f438b8133f674027b04625dfadec3ff985f6 | grep \"hasVersion\" | wc -l\r\n101155\r\n```\r\nwhile all crawl logs afterward (2019-02-04 and later) have equal numbers:\r\n```shell\r\n$ preston get hash://sha256/af0bb2c89571a30815d4488e72dede84a2ffc102bb87961f06884509fd5d1dae | grep \"wasGeneratedBy\" | wc -l\r\n56924\r\n$ preston get hash://sha256/af0bb2c89571a30815d4488e72dede84a2ffc102bb87961f06884509fd5d1dae | grep \"hasVersion\" | wc -l\r\n56924\r\n```\r\nMaybe we can retroactively generate the missing ```wasGeneratedBy``` statements (or, even better, ```qualifiedGeneration```s) and add them to the Preston log using ```preston reprocess```?","closed_by":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/18/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bio-guoda/preston/issues/18/timeline","performed_via_github_app":null,"state_reason":"completed"}