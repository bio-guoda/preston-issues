[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1062451009","html_url":"https://github.com/bio-guoda/preston/issues/148#issuecomment-1062451009","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/148","id":1062451009,"node_id":"IC_kwDOCMmefs4_U7dB","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T01:11:26Z","updated_at":"2022-03-09T20:43:46Z","body":"This enables streaming of all of GBIF by saying:\r\n\r\n```\r\n$ preston ls --remote https://deeplinker.bio | preston dwc-stream | gzip > gbif.json.gz\r\n```\r\n\r\nwhere all.json.gz is a giant super huge file with all records. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1062451009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1063369017","html_url":"https://github.com/bio-guoda/preston/issues/148#issuecomment-1063369017","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/148","id":1063369017,"node_id":"IC_kwDOCMmefs4_Ybk5","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T21:03:55Z","updated_at":"2022-03-09T21:03:55Z","body":"Some more specific examples -\r\n\r\nextract all scientificNames \r\n\r\n```\r\npreston ls --remote https://raw.githubusercontent.com/bio-guoda/preston-amazon/master/data/\\\r\n | preston dwc-stream --remote https://raw.githubusercontent.com/bio-guoda/preston-amazon/master/data/\\\r\n | jq --raw-output '.[\"http://rs.tdwg.org/dwc/terms/scientificName\"]'\\\r\n | grep -v null\\\r\n > names.txt\r\n```\r\n\r\nwith names.txt attached. \r\n\r\ntop 10 names.txt\r\n```\r\n$ head names.txt \r\nChalceus guaporensis Zanata & Toledo-Piza 2004\r\nAcestrorhynchus gr. lacustris (Lütken 1875)\r\nAcestrorhynchus microlepis (Jardine 1841)\r\nLaemolyta proxima (Garman 1890)\r\nPseudanos trimaculatus (Kner 1858)\r\nSchizodon fasciatus Spix & Agassiz 1829\r\nCynopotamus gouldingi Menezes 1987\r\nMoenkhausia lepidura (Kner 1858)\r\nTetragonopterus argenteus Cuvier 1816\r\nAstyanax abramis (Jenyns 1842)\r\n```\r\n[names.txt](https://github.com/bio-guoda/preston/files/8218196/names.txt)\r\n\r\n\r\n\r\nthen combine with [Nomer](https://github.com/globalbioticinteractions/nomer) or other taxonomic name matching tools to do name alignment . ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1063369017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1063381447","html_url":"https://github.com/bio-guoda/preston/issues/148#issuecomment-1063381447","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/148","id":1063381447,"node_id":"IC_kwDOCMmefs4_YenH","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T21:19:43Z","updated_at":"2022-03-09T21:19:43Z","body":"generating names and their associated *exact* locations of their original source\r\n```\r\npreston ls --remote https://raw.githubusercontent.com/bio-guoda/preston-amazon/master/data/\\\r\n | preston dwc-stream --remote https://raw.githubusercontent.com/bio-guoda/preston-amazon/master/data/\\\r\n | jq -c '. | select(has(\"http://rs.tdwg.org/dwc/terms/scientificName\")) | { \"http://rs.tdwg.org/dwc/terms/scientificName\": .\"http://rs.tdwg.org/dwc/terms/scientificName\", contentId: .contentId } ' | head\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Chalceus guaporensis Zanata & Toledo-Piza 2004\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L2\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Acestrorhynchus gr. lacustris (Lütken 1875)\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L3\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Acestrorhynchus microlepis (Jardine 1841)\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L4\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Laemolyta proxima (Garman 1890)\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L5\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Pseudanos trimaculatus (Kner 1858)\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L6\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Schizodon fasciatus Spix & Agassiz 1829\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L7\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Cynopotamus gouldingi Menezes 1987\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L8\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Moenkhausia lepidura (Kner 1858)\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L9\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Tetragonopterus argenteus Cuvier 1816\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L10\"}\r\n{\"http://rs.tdwg.org/dwc/terms/scientificName\":\"Astyanax abramis (Jenyns 1842)\",\"contentId\":\"line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L11\"}\r\n```\r\n\r\nwith \r\n\r\n```\r\n$ preston cat 'line:zip:hash://sha256/97cbeae429fbc95d1859f7afa28b33f08ac64125ba72511c49c4b77ca66d2d66!/occurrence.txt!/L2'\r\n1-37067-988\tThis work is licensed under a Creative Commons CCZero 1.0 License http://creativecommons.org/publicdomain/zero/1.0/legalcode and available according to the community norms at http://www.canadensys.net/norms. The data provider requests to be informed of publication 45 days in advance and can object to the use of the dataset within 30 days.\tCIRA\tThe data provider requests to be informed of publication 45 days in advance and can object to the use of the dataset within 30 days.\tBioFresh (publisher), Yukoni, T. and Torres L. V. (provider), Universidad Autónoma del Beni 'José Ballivian' (CIRA-UAB) (owner) (2015). Bolivian Amazon lowland fish metacommunity data. doi:10.13148/bfe105 Published on http://data.freshwaterbiodiversity.eu, accessed on [date].\tdoi:10.13148/bfe105\tCIRA-UNAN\tCIRA\tPreservedSpecimen\twaterBodyType=lake\t1-37067-988\t988\t2\tML1-37067\t25/06/01\t2001\tSite was sampled on 2 consecutive days. Date reported in the eventDate field is the first day of the visit.\tML1\tManuripi\tBolivia\tManuripi lake\t-11.95204\t-68.65672\t\tChalceus guaporensis Zanata & Toledo-Piza 2004\tAnimalia\tChalceidae\tChalceus\tguaporensis\tspecies\tZanata & Toledo-Piza 2004\r\n```\r\n\r\nthe original line containing scientificName \"Chalceus guaporensis Zanata & Toledo-Piza\" ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1063381447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1063419783","html_url":"https://github.com/bio-guoda/preston/issues/148#issuecomment-1063419783","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/148","id":1063419783,"node_id":"IC_kwDOCMmefs4_Yn-H","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T22:05:16Z","updated_at":"2022-03-09T22:05:44Z","body":"example for extracting image urls for UC Santa Barbara's @seltmann invertebrate zoology collection - \r\n\r\n```\r\npreston track \"https://serv.biokic.asu.edu/ecdysis/content/dwca/UCSB-IZC_DwC-A.zip\"\\\r\n | preston dwc-stream\\\r\n | grep \"http://rs.tdwg.org/ac/terms/Multimedia\"\\\r\n | jq --raw-output '.[\"http://rs.tdwg.org/ac/terms/goodQualityAccessURI\"], .[\"http://rs.tdwg.org/ac/terms/accessURI\"]'\\\r\n | sort\\\r\n | uniq\r\n> ucsb-izc-image-urls.txt\r\n```\r\n\r\nwith \r\n\r\n```\r\n$ cat ucsb-izc-image-urls.txt\r\n45530\r\n$ head  ucsb-izc-image-urls.txt\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC_00000001.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC00000001.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC_00000002.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC00000002.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC_00000003.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC00000003.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC_00000003_lg.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC_00000004.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC00000004.jpg\r\nhttps://serv.biokic.asu.edu/imglib/ecdysis/UCSB_IZC/UCSB-IZC00000/UCSB-IZC_00000004_lg.jpg\r\n```\r\n\r\n[ucsb-izc-image-urls.txt](https://github.com/bio-guoda/preston/files/8218444/ucsb-izc-image-urls.txt)\r\n\r\nNow, tracking all image urls . . . would be:\r\n\r\n```\r\ncat ucsb-izc-image-urls.txt\\\r\n| xargs -L100 preston track \r\n```\r\n\r\nSo, putting it together, you'd be able to track the UCSB-IZC and its images using:\r\n\r\n```\r\npreston track \"https://serv.biokic.asu.edu/ecdysis/content/dwca/UCSB-IZC_DwC-A.zip\"\\\r\n>  | preston dwc-stream\\\r\n>  | grep \"http://rs.tdwg.org/ac/terms/Multimedia\"\\\r\n>  | jq --raw-output '.[\"http://rs.tdwg.org/ac/terms/goodQualityAccessURI\"], .[\"http://rs.tdwg.org/ac/terms/accessURI\"]'\\\r\n>  | sort\\\r\n>  | uniq\\\r\n>  | xargs -L100 preston track\r\n```\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1063419783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1063503180","html_url":"https://github.com/bio-guoda/preston/issues/148#issuecomment-1063503180","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/148","id":1063503180,"node_id":"IC_kwDOCMmefs4_Y8VM","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T00:07:07Z","updated_at":"2022-03-10T00:07:07Z","body":"initial support introduced in https://github.com/bio-guoda/preston/releases/tag/0.3.5 . Suggest to report future improvement in separate issue.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1063503180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]