[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2020341248","html_url":"https://github.com/bio-guoda/preston/issues/280#issuecomment-2020341248","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/280","id":2020341248,"node_id":"IC_kwDOCMmefs54a_YA","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-26T12:48:58Z","updated_at":"2024-03-26T12:48:58Z","body":"Added the following rulesets to preston repo - \r\n\r\n```json\r\n{\r\n  \"id\": 574272,\r\n  \"name\": \"disable force push\",\r\n  \"target\": \"branch\",\r\n  \"source_type\": \"Repository\",\r\n  \"source\": \"bio-guoda/preston\",\r\n  \"enforcement\": \"active\",\r\n  \"conditions\": {\r\n    \"ref_name\": {\r\n      \"exclude\": [],\r\n      \"include\": [\r\n        \"~ALL\"\r\n      ]\r\n    }\r\n  },\r\n  \"rules\": [\r\n    {\r\n      \"type\": \"deletion\"\r\n    },\r\n    {\r\n      \"type\": \"non_fast_forward\"\r\n    },\r\n    {\r\n      \"type\": \"pull_request\",\r\n      \"parameters\": {\r\n        \"required_approving_review_count\": 1,\r\n        \"dismiss_stale_reviews_on_push\": false,\r\n        \"require_code_owner_review\": false,\r\n        \"require_last_push_approval\": false,\r\n        \"required_review_thread_resolution\": false\r\n      }\r\n    }\r\n  ],\r\n  \"bypass_actors\": []\r\n}\r\n```\r\n\r\nand tag protection\r\n\r\n```json\r\n{\r\n  \"id\": 574283,\r\n  \"name\": \"protect tags\",\r\n  \"target\": \"tag\",\r\n  \"source_type\": \"Repository\",\r\n  \"source\": \"bio-guoda/preston\",\r\n  \"enforcement\": \"active\",\r\n  \"conditions\": {\r\n    \"ref_name\": {\r\n      \"exclude\": [],\r\n      \"include\": [\r\n        \"~ALL\"\r\n      ]\r\n    }\r\n  },\r\n  \"rules\": [\r\n    {\r\n      \"type\": \"deletion\"\r\n    },\r\n    {\r\n      \"type\": \"non_fast_forward\"\r\n    },\r\n    {\r\n      \"type\": \"update\"\r\n    },\r\n    {\r\n      \"type\": \"creation\"\r\n    }\r\n  ],\r\n  \"bypass_actors\": []\r\n}\r\n```\r\n\r\nsee also attached json. \r\n\r\nAm open to suggestions . . . \r\n\r\n[protect tags.json](https://github.com/bio-guoda/preston/files/14758559/protect.tags.json)\r\n[disable force push.json](https://github.com/bio-guoda/preston/files/14758560/disable.force.push.json)\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2020341248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2020820331","html_url":"https://github.com/bio-guoda/preston/issues/280#issuecomment-2020820331","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/280","id":2020820331,"node_id":"IC_kwDOCMmefs54c0Vr","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-26T15:55:52Z","updated_at":"2024-03-26T15:55:52Z","body":"Also, I've set the GITHUB_TOKEN permissions to be read-only by default.\r\n\r\nbefore:\r\n\r\n![image](https://github.com/globalbioticinteractions/globalbioticinteractions/assets/1084872/978e2c47-db09-4878-ae01-fc33b8083c82)\r\n\r\nafter:\r\n\r\n![Screenshot from 2024-03-26 10-49-19](https://github.com/globalbioticinteractions/globalbioticinteractions/assets/1084872/6d012903-06de-41da-b2d4-a4f557cca7c7)\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2020820331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2027453166","html_url":"https://github.com/bio-guoda/preston/issues/280#issuecomment-2027453166","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/280","id":2027453166,"node_id":"IC_kwDOCMmefs542Hru","user":{"login":"cboettig","id":222586,"node_id":"MDQ6VXNlcjIyMjU4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/222586?v=4","gravatar_id":"","url":"https://api.github.com/users/cboettig","html_url":"https://github.com/cboettig","followers_url":"https://api.github.com/users/cboettig/followers","following_url":"https://api.github.com/users/cboettig/following{/other_user}","gists_url":"https://api.github.com/users/cboettig/gists{/gist_id}","starred_url":"https://api.github.com/users/cboettig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cboettig/subscriptions","organizations_url":"https://api.github.com/users/cboettig/orgs","repos_url":"https://api.github.com/users/cboettig/repos","events_url":"https://api.github.com/users/cboettig/events{/privacy}","received_events_url":"https://api.github.com/users/cboettig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-29T16:27:39Z","updated_at":"2024-03-29T16:27:39Z","body":"@jhpoelen thanks for sharing this, really appreciate it.  \r\n\r\nDo you know if there's any mechanism to 'bulk update' tokens in existing CI from the historic behavior of 'all permissions' to the new default read-only?  I understand why they didn't want to push that change on users and break workflows that need permissions, but still, I have always been so puzzled why GitHub tokens have such vast permissions.  I've never understood why GitHub tokens also get access to a \"all the user's repos and organizations\" by default?  Is that still the case or can a token be scoped to a repo (or at least to an org?).  Do you know how long GitHub tokens issued to CI are given before they expire?  \r\n\r\nI know the talk covered a lot of other issues, but the token thing seems the most universal secret here.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2027453166/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2030437040","html_url":"https://github.com/bio-guoda/preston/issues/280#issuecomment-2030437040","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/280","id":2030437040,"node_id":"IC_kwDOCMmefs55BgKw","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-01T19:44:25Z","updated_at":"2024-04-01T19:44:25Z","body":"@cboettig \r\n\r\n> Do you know if there's any mechanism to 'bulk update' tokens in existing CI from the historic behavior of 'all permissions' to the new default read-only?\r\n\r\nAssuming that all actions available via the website are available via the GitHub API, I imagine that scripting the token permissions is possible, but haven't seen any big buttons to click. I've updated the permissions via point-and-click workflows provided by GitHub web interface.\r\n\r\n> Is that still the case or can a token be scoped to a repo (or at least to an org?). Do you know how long GitHub tokens issued to CI are given before they expire?\r\n\r\nNot quite sure, I'd have to look. Perhaps others know more about this . . . I'd be curious to learn more.\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2030437040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]