[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2517760804","html_url":"https://github.com/bio-guoda/preston/issues/311#issuecomment-2517760804","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/311","id":2517760804,"node_id":"IC_kwDOCMmefs6WEfsk","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-04T15:21:08Z","updated_at":"2024-12-04T17:14:24Z","body":"reproducing the 429 error code using\r\n```\r\ncurl --verbose \"https://bdj.pensoft.net/lib/ajax_srv/archive_download.php?archive_type=2&document_id=6313\" > /dev/null\r\n```\r\n\r\nyielded a server response without apparent hints to when retries are expected - \r\n\r\n```\r\n< HTTP/2 429 \r\n< date: Wed, 04 Dec 2024 15:19:11 GMT\r\n< content-type: text/html; charset=UTF-8\r\n< content-length: 14\r\n< x-powered-by: PHP/8.3.10\r\n< set-cookie: PHPSESSID=6f97368fd1e10b21f002fab77ba13315; path=/; domain=.pensoft.net\r\n< expires: Thu, 19 Nov 1981 08:52:00 GMT\r\n< cache-control: no-store, no-cache, must-revalidate\r\n< pragma: no-cache\r\n< x-frame-options: SAMEORIGIN\r\n< cf-cache-status: DYNAMIC\r\n< report-to: {\"endpoints\":[{\"url\":\"https:\\/\\/a.nel.cloudflare.com\\/report\\/v4?s=23o8hKnX%2BFf4CYsaLfq%2FUaru5mhXPV4nH%2FB%2FkGKdqYaKbs1IFNCV88QV0j3UBs8lENS1OKETd9BbV2Ny4RlFKC%2BT%2FuWgTDssdzxTWh4vqbCAAxtu%2FW5deocvO6MBxXNjmw%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}\r\n< nel: {\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}\r\n< server: cloudflare\r\n< cf-ray: 8eccc5f71d99511a-MSP\r\n< server-timing: cfL4;desc=\"?proto=TCP&rtt=8473&min_rtt=5560&rtt_var=4111&sent=6&recv=10&lost=0&retrans=0&sent_bytes=3409&recv_bytes=826&delivery_rate=507358&cwnd=251&unsent_bytes=0&cid=9e4a4afce59f9db3&ts=592&x=0\"\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2517760804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2517767992","html_url":"https://github.com/bio-guoda/preston/issues/311#issuecomment-2517767992","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/311","id":2517767992,"node_id":"IC_kwDOCMmefs6WEhc4","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-04T15:23:42Z","updated_at":"2024-12-04T15:23:42Z","body":"Note that no retry hints are provided by the pensoft servers, in contrast to for instance Zenodo who provided x-rate-limit and retry-after headers.\r\n\r\n```\r\ncurl -I https://zenodo.org/api/records/?q=_files.checksum:/eb5e8f37583644943b86d1d9ebd4ded5 \r\n``` \r\n\r\nyielded - \r\n\r\n```\r\nHTTP/1.1 301 MOVED PERMANENTLY\r\nserver: nginx\r\ndate: Wed, 04 Dec 2024 15:22:44 GMT\r\ncontent-type: text/html; charset=utf-8\r\ncontent-length: 323\r\nlocation: /api/records?q=_files.checksum%3A%2Feb5e8f37583644943b86d1d9ebd4ded5\r\naccess-control-allow-origin: *\r\naccess-control-expose-headers: Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset\r\nx-ratelimit-limit: 133\r\nx-ratelimit-remaining: 131\r\nx-ratelimit-reset: 1733325820\r\nretry-after: 55\r\npermissions-policy: interest-cohort=()\r\nx-frame-options: sameorigin\r\nx-xss-protection: 1; mode=block\r\nx-content-type-options: nosniff\r\ncontent-security-policy: default-src 'self' fonts.googleapis.com *.gstatic.com data: 'unsafe-inline' 'unsafe-eval' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch\r\nstrict-transport-security: max-age=31556926; includeSubDomains\r\nreferrer-policy: strict-origin-when-cross-origin\r\nstrict-transport-security: max-age=15768000\r\nx-request-id: 79fc2bd05d0584592e159600734cc921\r\nset-cookie: 5569e5a730cade8ff2b54f1e815f3670=868f2920b8ca877cec49c34954d91d49; path=/; HttpOnly; Secure; SameSite=None\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2517767992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2517783648","html_url":"https://github.com/bio-guoda/preston/issues/311#issuecomment-2517783648","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/311","id":2517783648,"node_id":"IC_kwDOCMmefs6WElRg","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-04T15:29:46Z","updated_at":"2024-12-04T15:29:58Z","body":"Hi @howkins @daniel-mietchen and other Pensoft associated friends,\r\n\r\nI am trying to figure out how to best respond to ```429 too many requests``` from Pensoft web requests like \r\n\r\n```https://bdj.pensoft.net/lib/ajax_srv/archive_download.php?archive_type=2&document_id=6313```\r\n\r\nFor some reason, the pensoft servers do not provided any retry / rate limit hints in the reply header (see above). \r\n\r\nThanks!\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2517783648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2518045581","html_url":"https://github.com/bio-guoda/preston/issues/311#issuecomment-2518045581","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/311","id":2518045581,"node_id":"IC_kwDOCMmefs6WFlON","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-04T17:06:38Z","updated_at":"2024-12-04T17:06:38Z","body":"fyi @teodorgeorgiev","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2518045581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]