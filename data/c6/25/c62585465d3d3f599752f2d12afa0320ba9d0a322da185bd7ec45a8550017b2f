[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303518696","html_url":"https://github.com/bio-guoda/preston/issues/200#issuecomment-1303518696","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/200","id":1303518696,"node_id":"IC_kwDOCMmefs5Nsh3o","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T13:09:06Z","updated_at":"2022-11-04T13:09:06Z","body":"the crash appears to relate to cpio archives - https://en.wikipedia.org/wiki/Cpio . ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303518696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303784353","html_url":"https://github.com/bio-guoda/preston/issues/200#issuecomment-1303784353","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/200","id":1303784353,"node_id":"IC_kwDOCMmefs5Ntiuh","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T15:44:52Z","updated_at":"2022-11-04T15:44:52Z","body":"After adding context to error logging, the content in which the error occurred was found:\r\n\r\n```\r\n[main] WARN bio.guoda.preston.stream.ArchiveStreamHandler - failed to process some entry in [line:zip:hash://sha256/9af95ab26a1886db0f17b2102838a9b898a1627872590afb485044cb25d2a5c6!/name.tsv!/L185815]\r\njava.lang.NumberFormatException: For input string: \"76-e64\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n\tat java.base/java.lang.Long.parseLong(Long.java:692)\r\n\tat org.apache.commons.compress.archivers.cpio.CpioArchiveInputStream.readAsciiLong(CpioArchiveInputStream.java:376)\r\n\r\n```\r\n\r\nwhen tracing their provenance,\r\n\r\n```\r\npreston ls | grep \"hash://sha256/9af95ab26a1886db0f17b2102838a9b898a1627872590afb485044cb25d2a5c6\"\r\n```\r\n\r\nto content originated from:\r\n\r\n```\r\n<https://api.checklistbank.org/dataset/127379/archive.zip> <http://purl.org/pav/hasVersion> <hash://sha256/9af95ab26a1886db0f17b2102838a9b898a1627872590afb485044cb25d2a5c6> <urn:uuid:6d44686a-ad03-4b28-8fb7-a898f26c0c44> .\r\n```\r\n\r\nassociated with https://checklistbank.org/dataset/127379\r\n\r\nor \"Australian Faunal Directory 2022-10-12\" created by @rdmpage according to (see attached screenshot)\r\n\r\n![Screenshot from 2022-11-04 10-43-56](https://user-images.githubusercontent.com/1084872/200017438-973e2bcf-da5b-43a6-8621-c7084b8d3f14.png)\r\n![Screenshot from 2022-11-04 10-43-42](https://user-images.githubusercontent.com/1084872/200017439-e602b7ba-9826-45c9-98a3-6e6c16c307c8.png)\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303784353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303786939","html_url":"https://github.com/bio-guoda/preston/issues/200#issuecomment-1303786939","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/200","id":1303786939,"node_id":"IC_kwDOCMmefs5NtjW7","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T15:46:57Z","updated_at":"2022-11-04T15:46:57Z","body":"In looking at the offending line:\r\n\r\n```\r\npreston cat --remote https://linker.bio  'line:zip:hash://sha256/9af95ab26a1886db0f17b2102838a9b898a1627872590afb485044cb25d2a5c6!/name.tsv!/L185815'\r\n```\r\n\r\nthe following is produced: \r\n\r\n```\r\n07070776-e643-47bf-afab-22da04e3fd9c\tLasioglossum (Chilalictus) nefrens Walker, 1995\tWalker\tspecies\t\tLasioglossum\tChilalictus\tnefrens\t\tI\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303786939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303790250","html_url":"https://github.com/bio-guoda/preston/issues/200#issuecomment-1303790250","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/200","id":1303790250,"node_id":"IC_kwDOCMmefs5NtkKq","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T15:48:46Z","updated_at":"2022-11-04T15:49:02Z","body":"So, it appears that, for some reason, apache's common-compress v1.20 , interprets the UUID partly as some number.\r\n\r\n 070707**76-e64**3-47bf-afab-22da04e3fd9c","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303790250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303910589","html_url":"https://github.com/bio-guoda/preston/issues/200#issuecomment-1303910589","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/200","id":1303910589,"node_id":"IC_kwDOCMmefs5NuBi9","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T17:22:22Z","updated_at":"2022-11-04T17:24:35Z","body":"The root cause of this issue was that the UUID of some records started with the same \"magic\" bytes (e.g., UTF-8 070707, see https://github.com/bio-guoda/preston/commit/7b8309f73eff304c0e4f9bd66f457ad1b9357df0#diff-75010cab53467b9aed2237fd0c7490b8c6af019af372d93132faa17a352f9bf3R32) used to automatically detect CPIO archives https://en.wikipedia.org/wiki/Cpio .\r\n\r\nFix was introduced by explicitly *not* supporting CPIO when attempting to stream content from archives.  ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303910589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303911381","html_url":"https://github.com/bio-guoda/preston/issues/200#issuecomment-1303911381","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/200","id":1303911381,"node_id":"IC_kwDOCMmefs5NuBvV","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T17:23:12Z","updated_at":"2022-11-04T17:23:12Z","body":"@rdmpage @mielliott another great example of how big datasets can cause unknown crash buttons to be pushed. \r\n\r\nApologies for the false alarm.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303911381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303918144","html_url":"https://github.com/bio-guoda/preston/issues/200#issuecomment-1303918144","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/200","id":1303918144,"node_id":"IC_kwDOCMmefs5NuDZA","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T17:30:04Z","updated_at":"2022-11-04T17:30:04Z","body":"after introducing the fix, preston is able to print:\r\n\r\n```\r\npreston cat --remote https://linker.bio 'line:zip:hash://sha256/9af95ab26a1886db0f17b2102838a9b898a1627872590afb485044cb25d2a5c6!/name.tsv!/L185815,L185816'\r\n```\r\n\r\n```\r\n07070776-e643-47bf-afab-22da04e3fd9c\tLasioglossum (Chilalictus) nefrens Walker, 1995\tWalker\tspecies\t\tLasioglossum\tChilalictus\tnefrens\t\tICZN\testablished\t\t1995\t\r\nd32cc892-9c46-4e81-8b62-71df1ce34437\tLasioglossum (Chilalictus) nefrens Walker, 1995\tWalker\tspecies\t\tLasioglossum\tChilalictus\tnefrens\t\tICZN\testablished\t71f8aa80-adab-4783-8c23-143903dc8213\t1995\tj\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1303918144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]