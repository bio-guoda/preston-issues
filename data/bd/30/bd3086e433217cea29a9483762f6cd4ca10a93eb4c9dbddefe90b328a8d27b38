[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1203050831","html_url":"https://github.com/bio-guoda/preston/issues/182#issuecomment-1203050831","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/182","id":1203050831,"node_id":"IC_kwDOCMmefs5HtRlP","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-02T18:04:12Z","updated_at":"2022-08-02T18:04:30Z","body":"Looks like https://archive.org/download/preston-ucsb-izc/data.zip/2a/5d/2a5de79372318317a382ea9a2cef069780b852b01210ef59e06b640a3539cb5a returns a redirect\r\n```\r\n$ curl -i https://archive.org/download/preston-ucsb-izc/data.zip/2a/5d/2a5de79372318317a382ea9a2cef069780b852b01210ef59e06b640a3539cb5a | head -n1\r\nHTTP/1.1 302 Found\r\n```\r\n\r\nSo redirects need to be followed to get any data:\r\n\r\n```\r\n$ curl -L https://archive.org/download/preston-ucsb-izc/data.zip/2a/5d/2a5de79372318317a382ea9a2cef069780\r\nb852b01210ef59e06b640a3539cb5a\r\nhash://sha256/d5eb492d3e0304afadcc85f968de1e23042479ad670a5819cee00f2c2c277f36\r\n```\r\n\r\nMaybe preston isn't following redirects for remotes?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1203050831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1256572892","html_url":"https://github.com/bio-guoda/preston/issues/182#issuecomment-1256572892","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/182","id":1256572892,"node_id":"IC_kwDOCMmefs5K5cfc","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-23T19:03:06Z","updated_at":"2022-09-23T19:03:06Z","body":"@mielliott finally got around addressing this \"no provenance found\" issue. \r\n\r\nRoot cause was that Preston wasn't detecting invalid query results. Now, an IOException is thrown when a remote returns content that does not match the query. In case of hexastore queries, a result is valid if the result is a hash uri string. In case of a content query, the hash of the result should match the query key. With this, Preston is able to try alternative locations / strategies before calling it quits, allowing for redundancies and failover strategies. \r\n\r\nNow, the expected behavior is seen:\r\n\r\n```\r\n$ preston clone https://archive.org/download/preston-ucsb-izc/data.zip/ | tee log.txt\r\n[https://archive.org/down...210ef59e06b640a3539cb5a] 0 bytes at 0.00 MB/s completed in < 1 minute\r\n[https://archive.org/down...210ef59e06b640a3539cb5a] 78 bytes at 0.04 MB/s completed in < 1 minute\r\n[https://archive.org/down...70a5819cee00f2c2c277f36] 0 bytes at 0.00 MB/s completed in < 1 minute\r\n[https://archive.org/down...70a5819cee00f2c2c277f36] 66 MB at 11.13 MB/s^C\r\n```\r\n\r\nand \r\n\r\n```\r\n$ preston history\r\n<urn:uuid:0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/pav/hasVersion> <hash://sha256/d5eb492d3e0304afadcc85f968de1e23042479ad670a5819cee00f2c2c277f36> .\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1256572892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1256573461","html_url":"https://github.com/bio-guoda/preston/issues/182#issuecomment-1256573461","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/182","id":1256573461,"node_id":"IC_kwDOCMmefs5K5coV","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-23T19:03:43Z","updated_at":"2022-09-23T19:03:43Z","body":"btw - Preston did already follow http redirects.  ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1256573461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1256994705","html_url":"https://github.com/bio-guoda/preston/issues/182#issuecomment-1256994705","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/182","id":1256994705,"node_id":"IC_kwDOCMmefs5K7DeR","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-24T15:29:52Z","updated_at":"2022-09-24T15:29:52Z","body":"Very nice @jhpoelen, good to see this fixed. The added verification steps make me feel a lot better about pitching content delivery networks built on --remotes. ","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1256994705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]