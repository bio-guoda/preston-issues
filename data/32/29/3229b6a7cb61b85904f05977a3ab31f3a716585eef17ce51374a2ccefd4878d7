[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614001045","html_url":"https://github.com/bio-guoda/preston/issues/249#issuecomment-1614001045","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/249","id":1614001045,"node_id":"IC_kwDOCMmefs5gM7OV","user":{"login":"GregoryPost","id":98365364,"node_id":"U_kgDOBdzvtA","avatar_url":"https://avatars.githubusercontent.com/u/98365364?v=4","gravatar_id":"","url":"https://api.github.com/users/GregoryPost","html_url":"https://github.com/GregoryPost","followers_url":"https://api.github.com/users/GregoryPost/followers","following_url":"https://api.github.com/users/GregoryPost/following{/other_user}","gists_url":"https://api.github.com/users/GregoryPost/gists{/gist_id}","starred_url":"https://api.github.com/users/GregoryPost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GregoryPost/subscriptions","organizations_url":"https://api.github.com/users/GregoryPost/orgs","repos_url":"https://api.github.com/users/GregoryPost/repos","events_url":"https://api.github.com/users/GregoryPost/events{/privacy}","received_events_url":"https://api.github.com/users/GregoryPost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T01:45:01Z","updated_at":"2023-06-30T01:45:01Z","body":"@jhpoelen - I was able to toggle this behavior client side by removing or including the Accept-Encoding header from the request.\r\n\r\n- If the header was excluded, the server returned the file in the raw state (compressed) as desired.\r\n- If the header is included and contains 'gzip' in the value then the file is uncompressed and sent to the client.\r\n\r\nLet me know if you can replicate on your end.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614001045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614016841","html_url":"https://github.com/bio-guoda/preston/issues/249#issuecomment-1614016841","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/249","id":1614016841,"node_id":"IC_kwDOCMmefs5gM_FJ","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T02:09:45Z","updated_at":"2023-06-30T02:09:45Z","body":"For some reason, curl with and without Accept-Encoding header did not make a difference:\r\n\r\n```\r\n$ curl --silent -H \"Accept-Encoding: gzip\" \"https://biokic6.rc.asu.edu/preston/gbpln/4f/06/4f06230f7d9d902ea67708a0e4eb1e5c8120a1f7b30d77260832ad5803a56e17\" | gunzip | head -n2\r\nGBPLN370.SEQ        Genetic Sequence Data Bank\r\n                            June 15 2023\r\n```\r\n\r\nand \r\n```\r\n$ curl --silent \"https://biokic6.rc.asu.edu/preston/gbpln/4f/06/4f06230f7d9d902ea67708a0e4eb1e5c8120a1f7b30d77260832ad5803a56e17\" | gunzip | head -n2\r\nGBPLN370.SEQ        Genetic Sequence Data Bank\r\n                            June 15 2023\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614016841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614019531","html_url":"https://github.com/bio-guoda/preston/issues/249#issuecomment-1614019531","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/249","id":1614019531,"node_id":"IC_kwDOCMmefs5gM_vL","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T02:14:39Z","updated_at":"2023-06-30T02:15:07Z","body":"however, I did notice https://github.com/spring-cloud/spring-cloud-netflix/pull/1591/commits/537792c130e8b9b29085de140ed61afdff2934bb , and found that disabling httpclient on my end was the likely culprit by automatically decompressing gzip content by default. \r\n\r\nbefore disabling automated decompression - \r\n```\r\npreston cat\\\r\n --no-cache\\\r\n --remote https://biokic6.rc.asu.edu/preston/gbpln\\\r\n hash://sha256/90346c5616571af8fbacdd8449b5f04197c227ff4e8250443f1e76f649c21ec8\\\r\n | head -n2\r\n```\r\n\r\nyielded \r\n\r\n```\r\nGBPLN987.SEQ        Genetic Sequence Data Bank\r\n                            June 15 2023\r\n```\r\n\r\nafter disabling default content decompression:\r\n\r\n```\r\npreston cat\\\r\n --no-cache\\\r\n --remote https://biokic6.rc.asu.edu/preston/gbpln\\\r\n hash://sha256/90346c5616571af8fbacdd8449b5f04197c227ff4e8250443f1e76f649c21ec8\\\r\n | gunzip\\\r\n | head -n2\r\n```\r\n\r\nyielded the following *after* including gunzip in the pipe:\r\n```\r\nGenetic Sequence Data Bank\r\n                            June 15 2023\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614019531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614025119","html_url":"https://github.com/bio-guoda/preston/issues/249#issuecomment-1614025119","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/249","id":1614025119,"node_id":"IC_kwDOCMmefs5gNBGf","user":{"login":"GregoryPost","id":98365364,"node_id":"U_kgDOBdzvtA","avatar_url":"https://avatars.githubusercontent.com/u/98365364?v=4","gravatar_id":"","url":"https://api.github.com/users/GregoryPost","html_url":"https://github.com/GregoryPost","followers_url":"https://api.github.com/users/GregoryPost/followers","following_url":"https://api.github.com/users/GregoryPost/following{/other_user}","gists_url":"https://api.github.com/users/GregoryPost/gists{/gist_id}","starred_url":"https://api.github.com/users/GregoryPost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GregoryPost/subscriptions","organizations_url":"https://api.github.com/users/GregoryPost/orgs","repos_url":"https://api.github.com/users/GregoryPost/repos","events_url":"https://api.github.com/users/GregoryPost/events{/privacy}","received_events_url":"https://api.github.com/users/GregoryPost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T02:24:00Z","updated_at":"2023-06-30T02:24:00Z","body":"I am curious what you see if you run:\r\n`$ curl --silent -H \"Accept-Encoding: deflate\" \"https://biokic6.rc.asu.edu/preston/gbpln/4f/06/4f06230f7d9d902ea67708a0e4eb1e5c8120a1f7b30d77260832ad5803a56e17\" | head -n2`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614025119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614025445","html_url":"https://github.com/bio-guoda/preston/issues/249#issuecomment-1614025445","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/249","id":1614025445,"node_id":"IC_kwDOCMmefs5gNBLl","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T02:24:38Z","updated_at":"2023-06-30T02:24:38Z","body":"$ curl --silent -H \"Accept-Encoding: deflate\" \"https://biokic6.rc.asu.edu/preston/gbpln/4f/06/4f06230f7d9d902ea67708a0e4eb1e5c8120a1f7b30d77260832ad5803a56e17\" | head -n2\r\n$O�d�]Ks���W t;B�TeU>�:�A[������=) ���.HzF��7�@SТKS}�H� �F�CuV�??z��e�pxr�����ϋ��zy6;Y���bu��=�_�g���f_���f��E�A�t�w��Ǐ���w���~��_�~Z^,fǋ���j1�ð�����������w������Cqv�>[��a���������������r��^�Ϯ�������W�ߜ�^��X@b��/g ?���������O�^>;}���l�t�9_�|��qs�~�Y̮n�]]���~�Z\\��WW���.>ݟ�}P��+}��Y~zx���㣓�z�;l�8:�}����ɣ��^���h�~�Y���������_�%���&�%'���N�8zH9!`��;:8^��g7g���G��I�$\r\n�?�����q�����5yg�;k�Ys�>�sM���<���x���<���x���<��G�xd�|��;߅��|^���0�~wִ�杵4������w��²�G�xv����)�1��Zv�e�>�>�b(%+��Yo�C����~=���xu����Ã�Wo�mo�o��w���΍_��o.��WT��~���ɋw�/�����ͧ���o�,7���1���o��k�I�����?�>���n9���>,n��X^.6�w�z1�Z_,חW�s�������z~����g\r\n    �{�^���Vg����zy^/8�,�K��?�����.Ww˛���G?�����ߜ>}ul[}r�a}����WpW�-6�_��se��w�������N�oƓ�FY���������r����E��ˇ��n���=������g�^�����x6W�w��}ci��okۛ�ٕ��/��?�o���.�>覭�+�}u:��6�כ�buuu�1�<SB{�C�L��C����\\Z�<���So��t��ՋG/O�%?o������ߒ��=�!��|N7��?T���ɍ>��ӛ���_fg�¼9����������bvz����?g��˅\t)���K��_�o�[������G�˭�8<�����㣓�+g��gu��������n��VW뛍~���xxx',���_כ������{_?=������x{��r��^����8n]��|{u�8[.���77>��_��o��*��^�#`(��?K����۫�|�o�ϫ�`��𰤔�w1��Ѹ�ۋ������ҸToy��oV����\\�����}�~�v�g%9�@�}l�\r\n   �J�ȽPs��J��C�[j��*��\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614025445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614028004","html_url":"https://github.com/bio-guoda/preston/issues/249#issuecomment-1614028004","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/249","id":1614028004,"node_id":"IC_kwDOCMmefs5gNBzk","user":{"login":"GregoryPost","id":98365364,"node_id":"U_kgDOBdzvtA","avatar_url":"https://avatars.githubusercontent.com/u/98365364?v=4","gravatar_id":"","url":"https://api.github.com/users/GregoryPost","html_url":"https://github.com/GregoryPost","followers_url":"https://api.github.com/users/GregoryPost/followers","following_url":"https://api.github.com/users/GregoryPost/following{/other_user}","gists_url":"https://api.github.com/users/GregoryPost/gists{/gist_id}","starred_url":"https://api.github.com/users/GregoryPost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GregoryPost/subscriptions","organizations_url":"https://api.github.com/users/GregoryPost/orgs","repos_url":"https://api.github.com/users/GregoryPost/repos","events_url":"https://api.github.com/users/GregoryPost/events{/privacy}","received_events_url":"https://api.github.com/users/GregoryPost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T02:28:31Z","updated_at":"2023-06-30T02:28:31Z","body":"So that returned the raw compressed file - I'm guessing that curl has \"Accept-Encoding: gzip,...\" as a default unless it is explicitly overridden.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614028004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614036111","html_url":"https://github.com/bio-guoda/preston/issues/249#issuecomment-1614036111","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/249","id":1614036111,"node_id":"IC_kwDOCMmefs5gNDyP","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T02:41:57Z","updated_at":"2023-06-30T02:41:57Z","body":"After deployment of preston v0.6.5, the following expected behavior is observed: \r\n\r\n```\r\npreston cat --no-progress --no-cache --remote https://biokic6.rc.asu.edu/preston/gbpln hash://sha256/90346c5616571af8fbacdd8449b5f04197c227ff4e8250443f1e76f649c21ec8 | gunzip | head -n2\r\nGBPLN987.SEQ        Genetic Sequence Data Bank\r\n                            June 15 2023\r\n```\r\n\r\nand \r\n\r\n```\r\npreston cat --no-progress --no-cache --remote https://linker.bio hash://sha256/90346c5616571af8fbacdd8449b5f04197c227ff4e8250443f1e76f649c21ec8 | gunzip | head -n2\r\nGBPLN987.SEQ        Genetic Sequence Data Bank\r\n                            June 15 2023\r\n```\r\n\r\nwhere linker.bio is proxying the BioKIC server using Preston v0.6.5 . \r\n\r\n@GregPost-ASU thanks for being patient in helping to troubleshoot this funky issue. \r\n\r\nI still don't quite understand why I wasn't able to reproduce the curl commands. Am closing issue for now, as the desired behavior is observed after changes were applied.\r\n\r\nPlease do feel free to comment /re-open if you feel more work is needed.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1614036111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]