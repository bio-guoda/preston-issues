[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2635468014","html_url":"https://github.com/bio-guoda/preston/issues/320#issuecomment-2635468014","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/320","id":2635468014,"node_id":"IC_kwDOCMmefs6dFgzu","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-05T00:57:32Z","updated_at":"2025-02-05T00:57:32Z","body":"After implementing a first pass at OAI endpoint tracking, \n\nafter running \n```\npreston track \"https://zenodo.org/oai2d?verb=ListRecords&metadataPrefix=oai_datacite&set=user-eol\"\n```\n\nlisting the first three identifiers in the responses yielded:\n\n```\npreston head\\\n | preston cat\\\n | grep hasVersion\\\n | preston cat\\\n | grep \"<identifier identifierType\"\\\n | head\n```\n\nproduced:\n\n```\n              <identifier identifierType=\"DOI\">10.5281/zenodo.13322608</identifier>\n              <identifier identifierType=\"DOI\">10.5281/zenodo.13317421</identifier>\n              <identifier identifierType=\"DOI\">10.5281/zenodo.13320003</identifier>\n```\n\nor the first three records in the EOL community. \n\nwith a total number of records being:\n\n```\npreston head\\\n | preston cat\\\n | grep hasVersion\\\n | preston cat\\\n | grep \"<identifier identifierType\"\\\n | wc -l\n```\n\nyields\n\n```\n2593\n```\n\nwhich is consistent with the last OAI page \n\n```\npreston head\\\n | preston cat\\\n | grep hasVersion\\\n | tail -n1\\\n | preston cat\\\n | tail\n```\n\nending with:\n\n```\n                <description descriptionType=\"Abstract\">The Families and Genera of Vascular Plants. Kubitzki, Klaus, Editor. Dataset transcribed from vols. I and IV reviewed by hand, other volumes parsed into taxon descriptions by landmark detection, and processed in OpenRefine.</description>\n              </descriptions>\n            </resource>\n          </payload>\n        </oai_datacite>\n      </metadata>\n    </record>\n    <resumptionToken expirationDate=\"2025-02-05T00:48:41Z\" cursor=\"2500\" completeListSize=\"2593\"/>\n  </ListRecords>\n</OAI-PMH>\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2635468014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2637083800","html_url":"https://github.com/bio-guoda/preston/issues/320#issuecomment-2637083800","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/320","id":2637083800,"node_id":"IC_kwDOCMmefs6dLrSY","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-05T14:53:52Z","updated_at":"2025-02-05T15:29:34Z","body":"However, when running - \n\n```\npreston track \"https://zenodo.org/oai2d?verb=ListRecords&metadataPrefix=oai_datacite&set=user-biosyslit\"\n```\n\nto retrieve reference to ~1.5M (at time of writing) deposits in the biosyslit Zenodo community https://zenodo.org/communities/biosyslit,\n\nwith less than 10k deposits being listed, with the last page being:\n\n```\npreston cat hash://sha256/51803c9b2a690221d31535644f35bcffc0efe3a9b995c944a6438dee2052672c\\\n | tail \n```\n\n```\n                <description descriptionType=\"Other\">Published as part of Twomey, Evan, Delia, Jesse &amp; Castroviejo-Fisher, Santiago, 2014, A review of Northern Peruvian glassfrogs (Centrolenidae), with the description of four new remarkable species, pp. 1-87 in Zootaxa 3851 (1) on page 28, DOI: 10.11646/zootaxa.3851.1.1, http://zenodo.org/record/286921</description>\n              </descriptions>\n            </resource>\n          </payload>\n        </oai_datacite>\n      </metadata>\n    </record>\n    <resumptionToken expirationDate=\"2025-02-05T14:36:25Z\" cursor=\"8800\" completeListSize=\"1520550\">.eJwljc2OgjAYRd-la2dSYByCiQsNUkMGIp_SQjem2CpIEcOPosZ3H525y5OTcx-oVUqiCf60DRuPvzG2TcfCtjMeobM4KDRx8AiVV9EcWjR5vOwOTVDfquYjK-r21uqiQyNUqU5I0YlVo_bF8DJqUWzfYFd0Cj1HqN01tdbb4nWFPKL71BwMTug-NZ1eEvolPceQTJfuyTN44o8pyXVWci1JWM8GfgpKMKMkZzvt8R_qpKELHRAKIZXW7L2LJG5aM34zrHDD-6hyNmDqOVt0karyNDHqIQIOPJYiw7KiXojhzldZAlwk50Et5fyv09uLk4pYZmgImA_xPQe61HHMPKKWeQuVM391dGDqKFj660xDkzI4xTFPRAJWyoz_zgUWR3vHROkzRq6DOubr2PWxorCn96ADFlryOp2i5y9aPH7t.Z6N28Q.XNsoJ5ZIEMP1n3PfiAfbLNoxAeI</resumptionToken>\n  </ListRecords>\n</OAI-PMH>\n```\n\n\nfollowed by a (valid) query, \n\n```\nhttps://zenodo.org/oai2d?verb=ListRecords&resumptionToken=.eJwljc2OgjAYRd-la2dSYByCiQsNUkMGIp_SQjem2CpIEcOPosZ3H525y5OTcx-oVUqiCf60DRuPvzG2TcfCtjMeobM4KDRx8AiVV9EcWjR5vOwOTVDfquYjK-r21uqiQyNUqU5I0YlVo_bF8DJqUWzfYFd0Cj1HqN01tdbb4nWFPKL71BwMTug-NZ1eEvolPceQTJfuyTN44o8pyXVWci1JWM8GfgpKMKMkZzvt8R_qpKELHRAKIZXW7L2LJG5aM34zrHDD-6hyNmDqOVt0karyNDHqIQIOPJYiw7KiXojhzldZAlwk50Et5fyv09uLk4pYZmgImA_xPQe61HHMPKKWeQuVM391dGDqKFj660xDkzI4xTFPRAJWyoz_zgUWR3vHROkzRq6DOubr2PWxorCn96ADFlryOp2i5y9aPH7t.Z6N28Q.XNsoJ5ZIEMP1n3PfiAfbLNoxAeI\n```\n\nwhich resulted in a response with http error code 502 \"Bad Gateway\"\n\n```\norg.apache.http.client.HttpResponseException: status code: 502, reason phrase: [<https://zenodo.org/oai2d?verb=ListRecords&resumptionToken=.eJwljc2OgjAYRd-la2dSYByCiQsNUkMGIp_SQjem2CpIEcOPosZ3H525y5OTcx-oVUqiCf60DRuPvzG2TcfCtjMeobM4KDRx8AiVV9EcWjR5vOwOTVDfquYjK-r21uqiQyNUqU5I0YlVo_bF8DJqUWzfYFd0Cj1HqN01tdbb4nWFPKL71BwMTug-NZ1eEvolPceQTJfuyTN44o8pyXVWci1JWM8GfgpKMKMkZzvt8R_qpKELHRAKIZXW7L2LJG5aM34zrHDD-6hyNmDqOVt0karyNDHqIQIOPJYiw7KiXojhzldZAlwk50Et5fyv09uLk4pYZmgImA_xPQe61HHMPKKWeQuVM391dGDqKFj660xDkzI4xTFPRAJWyoz_zgUWR3vHROkzRq6DOubr2PWxorCn96ADFlryOp2i5y9aPH7t.Z6N28Q.XNsoJ5ZIEMP1n3PfiAfbLNoxAeI>]Bad Gateway\n```\n\nSee included Preston provenance logs for details. \n\n[zenodo-oai-biosyslit-preston-crawl-2025-02-05.zip](https://github.com/user-attachments/files/18674228/zenodo-oai-biosyslit-preston-crawl-2025-02-05.zip)\n\nto use: unzip, and run ```preston ls --data-dir [location of data dir]``` ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2637083800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2637247674","html_url":"https://github.com/bio-guoda/preston/issues/320#issuecomment-2637247674","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/320","id":2637247674,"node_id":"IC_kwDOCMmefs6dMTS6","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-05T15:29:06Z","updated_at":"2025-02-05T15:29:06Z","body":"see https://github.com/zenodo/zenodo-rdm/issues/1149","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/2637247674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]