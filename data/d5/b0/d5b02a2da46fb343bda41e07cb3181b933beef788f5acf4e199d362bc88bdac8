[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/700131948","html_url":"https://github.com/bio-guoda/preston/issues/81#issuecomment-700131948","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/81","id":700131948,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDEzMTk0OA==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T16:08:27Z","updated_at":"2020-09-28T16:08:27Z","body":"Preston's text matcher wasn't updating the current byte index correctly when the input stream didn't have any matches. It's fixed now, but the `preston match` is having another array bounds exception when parsing `hash://sha256/4256fd83db9270d2236776bc4bd45e22b15235e0798ba59952f8ddd1f7fbe7b2` from preston-amazon. Working on a fix.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/700131948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/700254088","html_url":"https://github.com/bio-guoda/preston/issues/81#issuecomment-700254088","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/81","id":700254088,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDI1NDA4OA==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T20:08:14Z","updated_at":"2020-09-28T20:10:27Z","body":"The default `Charset::decode` function was replacing uninterpretable byte sequences with \"unknown\" characters. I changed the decoder to ignore those bytes instead, and account for any resulting change in character byte positions.\r\n\r\nI ran `preston match` successfully on preston-amazon and found 45,451 URLs.\r\n\r\n```\r\n$ git clone https://github.com/bio-guoda/preston-amazon \r\n$ cd preston-amazon\r\n$ time preston ls | preston match > urls\r\nreal    0m3.264s\r\nuser    0m4.813s\r\nsys     0m1.453s\r\n$ wc -l urls\r\n45451\r\n$ tail urls\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b8409-8451> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b8814-8856> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b8863-8905> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b9164-9206> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b9569-9611> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b9618-9660> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b9919-9961> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b10324-10366> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b10373-10415> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b10674-10716> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <77ed1e55-8d40-4b89-9a91-f1f8c92822b6> .\r\n```\r\n\r\nAnd just to get that warm and fuzzy feeling of seeing it work:\r\n```\r\n$ preston get hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062 > 94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062\r\n$ unzip -p 94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062 references.txt | cut -z -b10674-10716\r\nhttp://dx.doi.org/10.3897/zookeys.740.14640\r\n```\r\n\r\nSadly, I couldn't figure out how to shorten it to one line instead of two. I hoped something like `preston get hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062 | unzip -p - references.txt | cut -z -b10674-10716` would work... but no luck (and no error messages, for that matter).\r\n\r\n@jhpoelen the issue should be fixed now. Can you confirm and close?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/700254088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/700268238","html_url":"https://github.com/bio-guoda/preston/issues/81#issuecomment-700268238","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/81","id":700268238,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDI2ODIzOA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T20:37:56Z","updated_at":"2020-09-28T20:37:56Z","body":"Nice! Thank for making me feel warm and fuzzy! I was able to reproduce your results:\r\n\r\n```shell\r\n$ git clone https://github.com/bio-guoda/preston-amazon\r\n$ cd preston-amazon\r\n$ time preston ls | preston match > urls\r\nreal\t0m6.443s\r\nuser\t0m10.653s\r\nsys\t0m1.747s\r\n$ wc -l urls\r\n45451 urls\r\n$ tail urls\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b8409-8451> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b8814-8856> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b8863-8905> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b9164-9206> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b9569-9611> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b9618-9660> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b9919-9961> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b10324-10366> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b10373-10415> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n<cut:zip:hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062!/references.txt!/b10674-10716> <http://www.w3.org/ns/prov#value> \"http://dx.doi.org/10.3897/zookeys.740.14640\" <9d59e57a-1dca-447f-9c48-c843b7ae2381> .\r\n$ preston get hash://sha256/94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062 > 94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062\r\n$ unzip -p 94a4fc4824d951c0155860e3e5c4c662afcfae55d52a25105bca1cb6a7b3a062 references.txt | cut -z -b10674-10716\r\nhttp://dx.doi.org/10.3897/zookeys.740.14640\r\n```\r\n\r\nThanks for providing a first pass at a reliable method to point into datasets. I can't even start to imagine all the possible features this unlocks . . . but we can start with linking Arctos host-parasite specimen ids across dwca archives. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/700268238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]