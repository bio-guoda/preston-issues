[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/3221347183","html_url":"https://github.com/bio-guoda/preston/issues/356#issuecomment-3221347183","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/356","id":3221347183,"node_id":"IC_kwDOCMmefs7AAdtv","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-08-25T18:40:43Z","updated_at":"2025-08-25T18:47:07Z","body":"With recent changes,\n\n```\npreston ls\\\n --algo md5\\\n --remote https://zenodo.org/records/16416531/files/\\\n --anchor hash://md5/2d9ef974add28bfe8f02b868736b147a\\\n | tail -1\n```\n\nproduces - \n\n```\n<classpath:/org/globalbioticinteractions/interaction_types_ro.csv> <http://purl.org/pav/hasVersion> <hash://md5/f5de551a5a7354a8a4ced2dd31a2c4db> <urn:uuid:8ebb6c43-5dce-4055-8a04-a608d228dbdf> .\n```\n\nSo, if a data.zip is present at a remote path, preston will try and discover content in it. \n\nNext step is to deduce remote paths from requested anchor when zenodo.org is specified as a remote.\n\ne.g., \n\n```\npreston ls\\\n --algo md5\\\n --remote https://zenodo.org/\\\n --anchor hash://md5/2d9ef974add28bfe8f02b868736b147a\\\n | preston cat\\\n --algo md5\\\n --remote https://zenodo.org\\\n --anchor hash://md5/2d9ef974add28bfe8f02b868736b147a\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/3221347183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/3662930706","html_url":"https://github.com/bio-guoda/preston/issues/356#issuecomment-3662930706","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/356","id":3662930706,"node_id":"IC_kwDOCMmefs7aU-MS","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-12-16T23:48:55Z","updated_at":"2025-12-17T04:33:31Z","body":"with recent changes, the following produces a first DwC-A extracted from the data.zip \n\n```\npreston ls \\\n --remote https://zenodo.org \\\n --anchor hash://md5/58de50154e330c331993fe5d0852ad84 \\\n --algo md5 \\\n | grep .zip \\\n | grep hasVersion \\\n | grep DwC \\\n | head -1 \\\n | preston dwc-stream \\\n --remote https://zenodo.org \\\n --anchor hash://md5/58de50154e330c331993fe5d0852ad84 \\\n --algo md5 \\\n | head -1 \\\n | jq .\n```\n\nyields the first record from the first DwC file mentioned in the provenance log, as extracted from the data.zip file at https://zenodo.org/api/records/16894884/files/data.zip/content . \n\nbeing\n\n```json\n{\n  \"http://www.w3.org/ns/prov#wasDerivedFrom\": \"line:zip:hash://md5/f0116c11643a3465d94ec7511621c232!/occurrences.csv!/L2\",\n  \"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\": \"http://rs.tdwg.org/dwc/terms/Occurrence\",\n  \"http://rs.tdwg.org/dwc/text/id\": \"29693343\",\n  \"http://rs.tdwg.org/dwc/terms/basisOfRecord\": \"Pinned Specimen\",\n  \"http://rs.tdwg.org/dwc/terms/verbatimEventDate\": null,\n  \"http://rs.tdwg.org/dwc/terms/catalogNumber\": \"ARTHARCH00034603\",\n  \"http://rs.tdwg.org/dwc/terms/dynamicProperties\": null,\n  \"http://rs.tdwg.org/dwc/terms/scientificNameAuthorship\": \"Emery, 1884\",\n  \"http://rs.tdwg.org/dwc/terms/eventDate\": \"2004-06-29\",\n  \"http://rs.tdwg.org/dwc/terms/taxonID\": \"234621\",\n  \"http://rs.tdwg.org/dwc/terms/georeferencedBy\": null,\n  \"http://rs.tdwg.org/dwc/terms/fieldNumber\": null,\n  \"http://rs.tdwg.org/dwc/terms/sex\": null,\n  \"http://rs.tdwg.org/dwc/terms/maximumDepthInMeters\": null,\n  \"http://rs.tdwg.org/dwc/terms/decimalLatitude\": \"26.122\",\n  \"http://rs.tdwg.org/dwc/terms/infraspecificEpithet\": null,\n  \"http://rs.tdwg.org/dwc/terms/stateProvince\": \"Florida\",\n  \"http://rs.tdwg.org/dwc/terms/georeferenceProtocol\": null,\n  \"http://purl.org/dc/elements/1.1/rights\": \"http://creativecommons.org/licenses/by-nc/4.0/\",\n  \"http://purl.org/dc/terms/accessRights\": null,\n  \"http://rs.tdwg.org/dwc/terms/lifeStage\": null,\n  \"http://rs.tdwg.org/dwc/terms/identificationRemarks\": null,\n  \"http://rs.tdwg.org/dwc/terms/recordedBy\": \"Mark Deyrup\",\n  \"http://rs.tdwg.org/dwc/terms/coordinateUncertaintyInMeters\": null,\n  \"http://rs.tdwg.org/dwc/terms/taxonRank\": null,\n  \"http://rs.tdwg.org/dwc/terms/class\": \"Insecta\",\n  \"http://rs.tdwg.org/dwc/terms/informationWithheld\": null,\n  \"http://purl.org/dc/terms/rightsHolder\": \"Archbold Biological Station\",\n  \"http://purl.org/dc/terms/language\": null,\n  \"http://rs.tdwg.org/dwc/terms/associatedTaxa\": null,\n  \"http://rs.tdwg.org/dwc/terms/collectionCode\": \"ARTHARCH\",\n  \"http://rs.tdwg.org/dwc/terms/individualCount\": null,\n  \"http://rs.tdwg.org/dwc/terms/verbatimElevation\": null,\n  \"http://rs.tdwg.org/dwc/terms/disposition\": null,\n  \"http://rs.tdwg.org/dwc/terms/otherCatalogNumbers\": null,\n  \"http://rs.tdwg.org/dwc/terms/typeStatus\": null,\n  \"http://rs.tdwg.org/dwc/terms/country\": \"United States\",\n  \"http://rs.tdwg.org/dwc/terms/verbatimDepth\": null,\n  \"http://rs.tdwg.org/dwc/terms/family\": \"Formicidae\",\n  \"http://rs.tdwg.org/dwc/terms/phylum\": \"Arthropoda\",\n  \"http://rs.tdwg.org/dwc/terms/samplingEffort\": null,\n  \"http://rs.tdwg.org/dwc/terms/geodeticDatum\": null,\n  \"http://rs.tdwg.org/dwc/terms/identifiedBy\": null,\n  \"http://symbiota.org/terms/recordEnteredBy\": null,\n  \"http://rs.tdwg.org/dwc/terms/reproductiveCondition\": null,\n  \"http://purl.org/dc/terms/references\": \"https://scan-bugs.org:443/portal/collections/individual/index.php?occid=29693343\",\n  \"http://rs.tdwg.org/dwc/terms/collectionID\": \"f52df103-0126-47fd-8836-934641444fcd\",\n  \"http://rs.tdwg.org/dwc/terms/occurrenceRemarks\": \"2 specimens on pin; Specimen voucher for Ants of Florida CRC Press 2016; Images of this species available atÂ https://www.antweb.org\",\n  \"http://rs.tdwg.org/dwc/terms/endDayOfYear\": null,\n  \"http://rs.tdwg.org/dwc/terms/habitat\": null,\n  \"http://portal.idigbio.org/terms/recordId\": \"urn:uuid:85dc3937-5e0b-438c-8401-f93af4d0a38f\",\n  \"http://purl.org/dc/terms/modified\": \"2019-06-24 12:45:21\",\n  \"http://rs.tdwg.org/dwc/terms/decimalLongitude\": \"-80.144\",\n  \"http://rs.tdwg.org/dwc/terms/order\": \"Hymenoptera\",\n  \"http://rs.tdwg.org/dwc/terms/georeferenceVerificationStatus\": null,\n  \"http://rs.tdwg.org/dwc/terms/day\": \"29\",\n  \"http://rs.tdwg.org/dwc/terms/minimumElevationInMeters\": null,\n  \"http://rs.tdwg.org/dwc/terms/municipality\": null,\n  \"http://rs.tdwg.org/dwc/terms/georeferenceRemarks\": null,\n  \"http://rs.tdwg.org/dwc/terms/locality\": \"Fort Lauderdale: Bonnet House, disturbed mesic area\",\n  \"http://rs.tdwg.org/dwc/terms/georeferenceSources\": null,\n  \"http://rs.tdwg.org/dwc/terms/occurrenceID\": \"85dc3937-5e0b-438c-8401-f93af4d0a38f\",\n  \"http://rs.tdwg.org/dwc/terms/specificEpithet\": \"mayri\",\n  \"http://rs.tdwg.org/dwc/terms/genus\": \"Anochetus\",\n  \"http://rs.tdwg.org/dwc/terms/associatedOccurrences\": null,\n  \"http://rs.tdwg.org/dwc/terms/ownerInstitutionCode\": null,\n  \"http://rs.tdwg.org/dwc/terms/month\": \"6\",\n  \"http://rs.tdwg.org/dwc/terms/locationRemarks\": null,\n  \"http://rs.tdwg.org/dwc/terms/samplingProtocol\": null,\n  \"http://rs.tdwg.org/dwc/terms/dateIdentified\": null,\n  \"http://rs.tdwg.org/dwc/terms/taxonRemarks\": null,\n  \"http://rs.tdwg.org/dwc/terms/county\": \"Broward County\",\n  \"http://rs.tdwg.org/dwc/terms/kingdom\": \"Animalia\",\n  \"http://rs.tdwg.org/dwc/terms/verbatimCoordinates\": null,\n  \"http://rs.tdwg.org/dwc/terms/recordNumber\": null,\n  \"http://rs.tdwg.org/dwc/terms/identificationReferences\": null,\n  \"http://rs.tdwg.org/dwc/terms/year\": \"2004\",\n  \"http://rs.tdwg.org/dwc/terms/establishmentMeans\": null,\n  \"http://rs.tdwg.org/dwc/terms/maximumElevationInMeters\": null,\n  \"http://rs.tdwg.org/dwc/terms/identificationQualifier\": null,\n  \"http://rs.tdwg.org/dwc/terms/preparations\": null,\n  \"http://rs.tdwg.org/dwc/terms/institutionCode\": \"ABS\",\n  \"http://rs.tdwg.org/dwc/terms/startDayOfYear\": \"181\",\n  \"http://rs.tdwg.org/dwc/terms/minimumDepthInMeters\": null,\n  \"http://rs.tdwg.org/dwc/terms/scientificName\": \"Anochetus mayri\",\n  \"http://rs.tdwg.org/dwc/terms/dataGeneralizations\": null\n}\n```\n\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/3662930706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/3662932765","html_url":"https://github.com/bio-guoda/preston/issues/356#issuecomment-3662932765","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/356","id":3662932765,"node_id":"IC_kwDOCMmefs7aU-sd","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-12-16T23:49:48Z","updated_at":"2025-12-16T23:49:48Z","body":"Note, however, that multiple requests to the same data.zip triggers a download of the entire data.zip each time. This maybe avoided by keeping (temporary) cache around of data.zip files.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/3662932765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/3663095609","html_url":"https://github.com/bio-guoda/preston/issues/356#issuecomment-3663095609","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/356","id":3663095609,"node_id":"IC_kwDOCMmefs7aVmc5","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-12-17T00:57:10Z","updated_at":"2025-12-17T00:57:10Z","body":"First pass of data.zip content discovery in anchored Zenodo pubs supported as shown above.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/3663095609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]