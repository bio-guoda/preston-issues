[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/712493373","html_url":"https://github.com/bio-guoda/preston/issues/86#issuecomment-712493373","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/86","id":712493373,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjQ5MzM3Mw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T23:18:34Z","updated_at":"2020-10-19T23:18:34Z","body":"@mielliott With recent addition in #72, I was able to use the following regular expression to extract related records (and their relation-type) using the explicit syntax that Arctos is using:\r\n\r\n```\r\n$ preston ls | preston match \"(?<first>http://arctos.database.museum/guid/[a-zA-Z0-9]+:[a-zA-Z0-9]+:[a-zA-Z0-9]+).*\\((?<verb>[a-zA-Z ]+)\\)\\s(?<collection>[a-zA-Z]+:[a-zA-Z]+)\\s(?<second>http://arctos.database.museum/guid/[a-zA-Z0-9]+:[a-zA-Z0-9]+:[a-zA-Z0-9]+)\" | grep -E \"(DMNS:Mamm:14613)\" \r\n<cut:zip:hash://sha256/c8ad90a719738ee86bf93b0ed5748c6e2f895086f1a02cb759565f5d68e8782b!/occurrence.txt!/b9083955-9084978> <http://www.w3.org/ns/prov#value> \"http://arctos.database.museum/guid/DMNS:Mamm:14613?seid=2588681\tPhysicalObject\t2020-05-19 17:28:59\ten\thttp://creativecommons.org/licenses/by-nc/3.0\thttp://vertnet.org/resources/norms.html\thttp://arctos.database.museum/guid/DMNS:Mamm:14613\tDMNS\t45\tDMNS\tMammal specimens\tPreservedSpecimen\t\tsex=female ; total length=102 mm; tail length=42 mm; hind foot with claw=13 mm; weight=3.5 g; age class=adult ; reproductive data=CSN, no placental scars\thttp://arctos.database.museum/guid/DMNS:Mamm:14613?seid=2588681\tDMNS:Mamm:14613\t\t\tCollector(s): Andrew G. Hope; Preparator(s): Andrew G. Hope\t1\tfemale\tadultwild caught\ttissue (frozen); blood (frozen); heart, spleen; liver (frozen); skeleton; skin, study; skin, study sample\tDZTM: Denver Zoology Tissue Mammal=3215\thttp://arctos.database.museum/MediaSearch.cfm?collection_object_id=24334415\t\t\thttp://arctos.database.museum/guid/DMNS:Mamm:14613\t(host of) DMNS:Para http://arctos.database.museum/guid/DMNS:Para:783; (host of) DMNS:Para http://arctos.database.museum/guid/DMNS:Para:784\" <208b55f8-f929-4028-b1fc-0cebe1fcdeba> .\r\n<cut:zip:hash://sha256/c8ad90a719738ee86bf93b0ed5748c6e2f895086f1a02cb759565f5d68e8782b!/occurrence.txt!/b9083955-9084004> <http://www.w3.org/ns/prov#value> \"http://arctos.database.museum/guid/DMNS:Mamm:14613\" <208b55f8-f929-4028-b1fc-0cebe1fcdeba> .\r\n<cut:zip:hash://sha256/f94a260e9347edaddc84adeaae1c86d841f9883608e7584b56d40c7b9f29e365!/occurrence.txt!/b712012-712539> <http://www.w3.org/ns/prov#value> \"http://arctos.database.museum/guid/DMNS:Para:784\tDMNS\t127\tDMNS\tParasite specimens\tPreservedSpecimen\t\thttp://arctos.database.museum/guid/DMNS:Para:784?seid=3371278\tDMNS:Para:784\t\t\tCollector(s): Andrew G. Hope; Preparator(s): Andrew G. Hope\t1\t\t\twild caught\twhole organism (70% ethanol)\tDZTM: Denver Zoology Tissue Mammal=3215\t\t\thttp://arctos.database.museum/guid/DMNS:Para:784\t(collected with) DMNS:Para http://arctos.database.museum/guid/DMNS:Para:783; (parasite of) DMNS:Mamm http://arctos.database.museum/guid/DMNS:Mamm:14613\" <23727194-ff00-4edb-a2bd-f4843ddf413a> .\r\n<cut:zip:hash://sha256/f94a260e9347edaddc84adeaae1c86d841f9883608e7584b56d40c7b9f29e365!/occurrence.txt!/b712490-712539> <http://www.w3.org/ns/prov#value> \"http://arctos.database.museum/guid/DMNS:Mamm:14613\" <23727194-ff00-4edb-a2bd-f4843ddf413a> .\r\n<cut:zip:hash://sha256/f94a260e9347edaddc84adeaae1c86d841f9883608e7584b56d40c7b9f29e365!/occurrence.txt!/b1520718-1521386> <http://www.w3.org/ns/prov#value> \"http://arctos.database.museum/guid/DMNS:Para:783?seid=3371277\tPhysicalObject\t2020-05-19 17:28:59\ten\t\thttp://vertnet.org/resources/norms.html\thttp://arctos.database.museum/guid/DMNS:Para:783\tDMNS\t127\tDMNS\tParasite specimens\tPreservedSpecimen\t\t\thttp://arctos.database.museum/guid/DMNS:Para:783?seid=3371277\tDMNS:Para:783\t\t\tCollector(s): Andrew G. Hope; Preparator(s): Andrew G. Hope\t1\t\t\twild caught\twhole organism (70% ethanol)\tDZTM: Denver Zoology Tissue Mammal=3215\t\t\t\thttp://arctos.database.museum/guid/DMNS:Para:783\t(collected with) DMNS:Para http://arctos.database.museum/guid/DMNS:Para:784; (parasite of) DMNS:Mamm http://arctos.database.museum/guid/DMNS:Mamm:14613\" <b91f9932-e4fe-41c6-82c4-d132ec07a8ee> .\r\n<cut:zip:hash://sha256/f94a260e9347edaddc84adeaae1c86d841f9883608e7584b56d40c7b9f29e365!/occurrence.txt!/b1521337-1521386> <http://www.w3.org/ns/prov#value> \"http://arctos.database.museum/guid/DMNS:Mamm:14613\" <b91f9932-e4fe-41c6-82c4-d132ec07a8ee> .\r\n```\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/712493373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/713244029","html_url":"https://github.com/bio-guoda/preston/issues/86#issuecomment-713244029","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/86","id":713244029,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzI0NDAyOQ==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T02:03:31Z","updated_at":"2020-10-21T02:04:38Z","body":"Neat! Looks like poor old `Mamm:14613` is riddled with parasites (I'm hoping there's a symbiotic relationship there).\r\n\r\nWould it help to annotate the reported submatches with their regex group names? This way, the user can inject some semantics into the output. For example,\r\n```\r\n$ preston ls | preston match \"(?<recordSpecimen>http://arctos.database.museum/guid/[a-zA-Z0-9]+:[a-zA-Z0-9]+:[a-zA-Z0-9]+).*\\((?<verb>[a-zA-Z ]+)\\)\\s(?<collection>[a-zA-Z]+:[a-zA-Z]+)\\s(?<relatedSpecimen>http://arctos.database.museum/guid/[a-zA-Z0-9]+:[a-zA-Z0-9]+:[a-zA-Z0-9]+)\" | grep -E \"(DMNS:Mamm:14613)\"<relatedSpecimen>http://arctos.database.museum/guid/[a-zA-Z0-9]+:[a-zA-Z0-9]+:[a-zA-Z0-9]+)\" | grep -E \"(DMNS:Mamm:14613)\"\r\n...\r\n<cut:zip:hash://blah!/occurrence.txt!/b123-143> <value> \"http://arctos.database.museum/guid/DMNS:Mamm:14613\"\r\n<cut:zip:hash://blah!/occurrence.txt!/b123-143> <match label> \"recordSpecimen:[the regex]\"\r\n<cut:zip:hash://blah!/occurrence.txt!/b200-243> <value> \"http://arctos.database.museum/guid/DMNS:Para:784\"\r\n<cut:zip:hash://blah!/occurrence.txt!/b200-243> <match label> \"relatedSpecimen:[the regex]\"\r\n...\r\n```\r\n\r\nThis would make it simple to do further processing to enrich the `preston match` output by e.g. looking looking for pairs of matched text labeled \"recordSpecimen\" and \"relatedSpecimen\" so that we can say `<...Mamm:14613> <host of> <...Para:784?>`.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/713244029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1984531959","html_url":"https://github.com/bio-guoda/preston/issues/86#issuecomment-1984531959","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/86","id":1984531959,"node_id":"IC_kwDOCMmefs52SY33","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-07T21:28:04Z","updated_at":"2024-03-07T21:28:04Z","body":"closing stale linking record discussion.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1984531959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]