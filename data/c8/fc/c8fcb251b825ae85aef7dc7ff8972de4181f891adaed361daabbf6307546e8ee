[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/531922351","html_url":"https://github.com/bio-guoda/preston/issues/21#issuecomment-531922351","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/21","id":531922351,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTkyMjM1MQ==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-16T19:27:14Z","updated_at":"2019-09-16T19:27:14Z","body":"@mielliott thanks for sharing. You mentioned that non-parsable results were generated. Was this malformed json or some error code resulting in a blank node? ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/531922351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/531939481","html_url":"https://github.com/bio-guoda/preston/issues/21#issuecomment-531939481","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/21","id":531939481,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTkzOTQ4MQ==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-16T20:14:33Z","updated_at":"2019-09-16T20:14:33Z","body":"> @mielliott thanks for sharing. You mentioned that non-parsable results were generated. Was this malformed json or some error code resulting in a blank node?\r\n\r\nI was trying to be careful how I worded that; RegistryReaderGBIF only checks if a ```JsonNode``` could be parsed from the result of the query, and I assume this check failed in the March crawl.\r\nhttps://github.com/bio-guoda/preston/blob/fc638c4faaf470110131be01b95355a46d62fb64/src/main/java/bio/guoda/preston/process/RegistryReaderGBIF.java#L95\r\nhttps://github.com/bio-guoda/preston/blob/fc638c4faaf470110131be01b95355a46d62fb64/src/main/java/bio/guoda/preston/process/RegistryReaderGBIF.java#L110\r\nHowever, the last line in the March log shows a ```genid``` was returned, so I assume it was a 404 error or something:\r\n```\r\n<https://api.gbif.org/v1/dataset?offset=8560&limit=20> <http://purl.org/pav/hasVersion> <https://deeplinker.bio/.well-known/genid/1b9bd20f-42ab-3014-bf0a-dd9af23664be> .\r\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/531939481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/531943633","html_url":"https://github.com/bio-guoda/preston/issues/21#issuecomment-531943633","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/21","id":531943633,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTk0MzYzMw==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-16T20:25:26Z","updated_at":"2019-09-16T20:25:26Z","body":"@mielliott thanks  for clarifying. This does look like a some temporary network outage or server error. I wish there was a way to retrieve the entire GBIF registry in one go. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/531943633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/531955680","html_url":"https://github.com/bio-guoda/preston/issues/21#issuecomment-531955680","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/21","id":531955680,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTk1NTY4MA==","user":{"login":"mdoering","id":327505,"node_id":"MDQ6VXNlcjMyNzUwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/327505?v=4","gravatar_id":"","url":"https://api.github.com/users/mdoering","html_url":"https://github.com/mdoering","followers_url":"https://api.github.com/users/mdoering/followers","following_url":"https://api.github.com/users/mdoering/following{/other_user}","gists_url":"https://api.github.com/users/mdoering/gists{/gist_id}","starred_url":"https://api.github.com/users/mdoering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdoering/subscriptions","organizations_url":"https://api.github.com/users/mdoering/orgs","repos_url":"https://api.github.com/users/mdoering/repos","events_url":"https://api.github.com/users/mdoering/events{/privacy}","received_events_url":"https://api.github.com/users/mdoering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-16T20:58:44Z","updated_at":"2019-09-16T20:58:44Z","body":"querying the GBIF registry via `https://api.gbif.org/v1/dataset?offset=8560&limit=20` and looking for the endOfRecords flag is an expected use. If you experience unparsable, bad responses please [log an issue with GBIF](https://github.com/gbif/registry/issues). If you plan to page through all datasets using a larger limit of 100 or 500 would help.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/531955680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/532351540","html_url":"https://github.com/bio-guoda/preston/issues/21#issuecomment-532351540","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/21","id":532351540,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjM1MTU0MA==","user":{"login":"mielliott","id":9602463,"node_id":"MDQ6VXNlcjk2MDI0NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9602463?v=4","gravatar_id":"","url":"https://api.github.com/users/mielliott","html_url":"https://github.com/mielliott","followers_url":"https://api.github.com/users/mielliott/followers","following_url":"https://api.github.com/users/mielliott/following{/other_user}","gists_url":"https://api.github.com/users/mielliott/gists{/gist_id}","starred_url":"https://api.github.com/users/mielliott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mielliott/subscriptions","organizations_url":"https://api.github.com/users/mielliott/orgs","repos_url":"https://api.github.com/users/mielliott/repos","events_url":"https://api.github.com/users/mielliott/events{/privacy}","received_events_url":"https://api.github.com/users/mielliott/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T18:47:18Z","updated_at":"2019-09-17T18:47:18Z","body":"Thanks @mdoering for the insight. Rather than using our current ```endOfRecords``` check for paging through the datasets, maybe we should use ```count``` to build a list of queries to submit and continue submitting them even if one fails. Then, we can keep querying successive pages until ```endOfRecords``` is met or we don't receive a response.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/532351540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/533227520","html_url":"https://github.com/bio-guoda/preston/issues/21#issuecomment-533227520","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/21","id":533227520,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzIyNzUyMA==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T17:19:15Z","updated_at":"2019-09-19T17:19:15Z","body":"@mielliott @mdoering am now submitting all pages at once using the default page size provided by GBIF api (i.e. 20). I am assuming that the default page size is tuned so that pages can be efficiently retrieved. Will open pull request to increase the default in the GBIF api to reflect @mdoering suggestion.  ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/533227520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/534153226","html_url":"https://github.com/bio-guoda/preston/issues/21#issuecomment-534153226","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/21","id":534153226,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDE1MzIyNg==","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T15:31:39Z","updated_at":"2019-09-23T15:31:39Z","body":"The subject of this issue has been addressed by submitting all gbif dataset registry pages at once. Eager to replace this with a non-paginated solution, like suggested in https://github.com/gbif/registry/issues/147 . Improvement made available in https://github.com/bio-guoda/preston/releases/tag/0.1.4 .\r\n\r\n@mielliott please re-open / comment if you feel this issue was not properly addressed.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/534153226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]