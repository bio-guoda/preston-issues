[{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1546791800","html_url":"https://github.com/bio-guoda/preston/issues/240#issuecomment-1546791800","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/240","id":1546791800,"node_id":"IC_kwDOCMmefs5cMit4","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-14T02:28:39Z","updated_at":"2023-05-14T02:28:39Z","body":"with recent changes, you can do:\r\n\r\n```\r\necho \"ls\" | preston bash \r\n```\r\n\r\nto:\r\n1. track the commands (e.g., `ls`)\r\n2. run the commands in bash shell\r\n3. track the output \r\n\r\nso, in order to see the result of `ls`, you can do:\r\n\r\n```\r\necho ls | preston bash | preston hasVersion | preston cat\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1546791800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1546791940","html_url":"https://github.com/bio-guoda/preston/issues/240#issuecomment-1546791940","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/240","id":1546791940,"node_id":"IC_kwDOCMmefs5cMiwE","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-14T02:29:48Z","updated_at":"2023-05-14T02:29:48Z","body":"note that the commands and their output tracked and appended to the provenance log. \r\n\r\n@mielliott curious to hear your thoughts on this one new `preston bash` command.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1546791940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1546792575","html_url":"https://github.com/bio-guoda/preston/issues/240#issuecomment-1546792575","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/240","id":1546792575,"node_id":"IC_kwDOCMmefs5cMi5_","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-14T02:36:08Z","updated_at":"2023-05-14T02:36:08Z","body":"e.g.,\r\n\r\n```\r\necho \"curl https://example.org | head -n4\" | preston bash | grep hasVersion | preston cat\r\n```\r\n\r\nyielded:\r\n\r\n```\r\n<!doctype html>\r\n<html>\r\n<head>\r\n    <title>Example Domain</title>\r\n```\r\n\r\nwith \r\n\r\n```\r\necho \"curl https://example.org | head -n4\" | preston bash | grep hasVersion \r\n```\r\n\r\nbeing\r\n\r\n```\r\n<urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <http://purl.org/pav/hasVersion> <hash://sha256/859077f4c8ed88c9549b80868542870a931dcdd217421ad0d2b3fce317920754> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> .\r\n```\r\n\r\nwith overall provenance log - \r\n\r\n```\r\n<https://preston.guoda.bio> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#SoftwareAgent> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<https://preston.guoda.bio> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Agent> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<https://preston.guoda.bio> <http://purl.org/dc/terms/description> \"Preston is a software program that finds, archives and provides access to biodiversity datasets.\"@en <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Activity> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <http://purl.org/dc/terms/description> \"Executes script and captures stdout\"@en <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <http://www.w3.org/ns/prov#startedAtTime> \"2023-05-14T02:31:30.809Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <http://www.w3.org/ns/prov#wasStartedBy> <https://preston.guoda.bio> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<https://doi.org/10.5281/zenodo.1410543> <http://www.w3.org/ns/prov#usedBy> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<https://doi.org/10.5281/zenodo.1410543> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.org/dc/dcmitype/Software> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<https://doi.org/10.5281/zenodo.1410543> <http://purl.org/dc/terms/bibliographicCitation> \"Jorrit Poelen, Icaro Alzuru, & Michael Elliott. 2021. Preston: a biodiversity dataset tracker (Version 0.6.3-SNAPSHOT) [Software]. Zenodo. http://doi.org/10.5281/zenodo.1410543\"@en <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<urn:uuid:0659a54f-b713-4f86-a917-5be166a14110> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Entity> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<urn:uuid:0659a54f-b713-4f86-a917-5be166a14110> <http://purl.org/dc/terms/description> \"A biodiversity dataset graph archive.\"@en <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<hash://sha256/6d8095bfd3dcc6c72099990b858534af9b002284a84d7fb61839349e7d5e99b9> <http://www.w3.org/ns/prov#usedBy> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> .\r\n<hash://sha256/2b9031ba44c50765a6275dcc8d70c7842fa4a04a2cf834d160b74accf5f2dc8a> <http://purl.org/dc/elements/1.1/format> \"text/x-shellscript\" .\r\n<urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <http://www.w3.org/ns/prov#used> <hash://sha256/2b9031ba44c50765a6275dcc8d70c7842fa4a04a2cf834d160b74accf5f2dc8a> .\r\n<hash://sha256/859077f4c8ed88c9549b80868542870a931dcdd217421ad0d2b3fce317920754> <http://www.w3.org/ns/prov#wasGeneratedBy> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> .\r\n<hash://sha256/859077f4c8ed88c9549b80868542870a931dcdd217421ad0d2b3fce317920754> <http://www.w3.org/ns/prov#qualifiedGeneration> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> .\r\n<urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> <http://www.w3.org/ns/prov#generatedAtTime> \"2023-05-14T02:31:33.349Z\"^^<http://www.w3.org/2001/XMLSchema#dateTime> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> .\r\n<urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.w3.org/ns/prov#Generation> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> .\r\n<urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> <http://www.w3.org/ns/prov#used> <urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> .\r\n<urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <http://purl.org/pav/hasVersion> <hash://sha256/859077f4c8ed88c9549b80868542870a931dcdd217421ad0d2b3fce317920754> <urn:uuid:0d4554eb-0cf2-402d-b4b0-07154e9fe662> .\r\n```\r\n\r\nnote the commands are tracked using\r\n\r\n```\r\npreston head | preston cat  | grep  hash://sha256/2b9031ba44c50765a6275dcc8d70c7842fa4a04a2cf834d160b74accf5f2dc8a\r\n```\r\n\r\n```\r\n<hash://sha256/2b9031ba44c50765a6275dcc8d70c7842fa4a04a2cf834d160b74accf5f2dc8a> <http://purl.org/dc/elements/1.1/format> \"text/x-shellscript\" .\r\n<urn:uuid:69b44053-aaa6-43c3-8abd-b6dd5ba30583> <http://www.w3.org/ns/prov#used> <hash://sha256/2b9031ba44c50765a6275dcc8d70c7842fa4a04a2cf834d160b74accf5f2dc8a> .\r\n```\r\n\r\nwith \r\n\r\n```\r\npreston cat hash://sha256/2b9031ba44c50765a6275dcc8d70c7842fa4a04a2cf834d160b74accf5f2dc8a\r\n```\r\n\r\n```\r\ncurl https://example.org | head -n4\r\n```\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1546792575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1556044254","html_url":"https://github.com/bio-guoda/preston/issues/240#issuecomment-1556044254","issue_url":"https://api.github.com/repos/bio-guoda/preston/issues/240","id":1556044254,"node_id":"IC_kwDOCMmefs5cv1ne","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-20T23:49:39Z","updated_at":"2023-05-20T23:49:39Z","body":"Now, you can also use stdin in combination with a defined bash script - \r\n\r\ntrack / capture a script ```tr ' ' '\\n'``` (replace whitespaces with newline)\r\n```\r\necho \"tr ' ' '\\n'\"\\\r\n | preston track\\\r\n | tail -n1\r\n```\r\n\r\nyields \r\n\r\n```\r\n<urn:uuid:15878b44-8fff-488c-96b9-cc433ec9783f> <http://purl.org/pav/hasVersion> <hash://sha256/d3929c7cb775c45388276ea1ae7dee1f80911e62def500325f89f14d31464626> <urn:uuid:412525f3-b60e-479a-862e-f2c0120c3f6f> .\r\n```\r\n\r\nindicating that the captured script has content id `hash://sha256/d3929c7cb775c45388276ea1ae7dee1f80911e62def500325f89f14d31464626` . \r\n\r\nNow, you can use the script like:\r\n\r\n```\r\necho \"one two\"\\\r\n | preston bash -c hash://sha256/d3929c7cb775c45388276ea1ae7dee1f80911e62def500325f89f14d31464626\\\r\n | tail -n1\\\r\n | preston cat\r\n```\r\n\r\nyielding:\r\n\r\n```\r\none\r\ntwo\r\n```\r\n\r\n(replacing the white space in ```one two``` with a newline)\r\n\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bio-guoda/preston/issues/comments/1556044254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]